module.exports=(()=>{var e={7484:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",o="minute",n="hour",i="day",r="week",s="month",a="quarter",u="year",l="date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,o){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(o)+e},h={s:p,z:function(e){var t=-e.utcOffset(),o=Math.abs(t),n=Math.floor(o/60),i=o%60;return(t<=0?"+":"-")+p(n,2,"0")+":"+p(i,2,"0")},m:function e(t,o){if(t.date()<o.date())return-e(o,t);var n=12*(o.year()-t.year())+(o.month()-t.month()),i=t.clone().add(n,s),r=o-i<0,a=t.clone().add(n+(r?-1:1),s);return+(-(n+(o-i)/(r?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:s,y:u,w:r,d:i,D:l,h:n,m:o,s:t,ms:e,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",g={};g[m]=f;var T=function(e){return e instanceof y},v=function(e,t,o){var n;if(!e)return m;if("string"==typeof e)g[e]&&(n=e),t&&(g[e]=t,n=e);else{var i=e.name;g[i]=e,n=i}return!o&&n&&(m=n),n||!o&&m},w=function(e,t){if(T(e))return e.clone();var o="object"==typeof t?t:{};return o.date=e,o.args=arguments,new y(o)},D=h;D.l=v,D.i=T,D.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var y=function(){function f(e){this.$L=v(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,o=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(c);if(n){var i=n[2]-1||0,r=(n[7]||"0").substring(0,3);return o?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return D},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,t){var o=w(e);return this.startOf(t)<=o&&o<=this.endOf(t)},p.isAfter=function(e,t){return w(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<w(e)},p.$g=function(e,t,o){return D.u(e)?this[t]:this.set(o,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,a){var c=this,d=!!D.u(a)||a,f=D.p(e),p=function(e,t){var o=D.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return d?o:o.endOf(i)},h=function(e,t){return D.w(c.toDate()[e].apply(c.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},m=this.$W,g=this.$M,T=this.$D,v="set"+(this.$u?"UTC":"");switch(f){case u:return d?p(1,0):p(31,11);case s:return d?p(1,g):p(0,g+1);case r:var w=this.$locale().weekStart||0,y=(m<w?m+7:m)-w;return p(d?T-y:T+(6-y),g);case i:case l:return h(v+"Hours",0);case n:return h(v+"Minutes",1);case o:return h(v+"Seconds",2);case t:return h(v+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(r,a){var c,d=D.p(r),f="set"+(this.$u?"UTC":""),p=(c={},c[i]=f+"Date",c[l]=f+"Date",c[s]=f+"Month",c[u]=f+"FullYear",c[n]=f+"Hours",c[o]=f+"Minutes",c[t]=f+"Seconds",c[e]=f+"Milliseconds",c)[d],h=d===i?this.$D+(a-this.$W):a;if(d===s||d===u){var m=this.clone().set(l,1);m.$d[p](h),m.init(),this.$d=m.set(l,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[D.p(e)]()},p.add=function(e,a){var l,c=this;e=Number(e);var d=D.p(a),f=function(t){var o=w(c);return D.w(o.date(o.date()+Math.round(t*e)),c)};if(d===s)return this.set(s,this.$M+e);if(d===u)return this.set(u,this.$y+e);if(d===i)return f(1);if(d===r)return f(7);var p=(l={},l[o]=6e4,l[n]=36e5,l[t]=1e3,l)[d]||1,h=this.$d.getTime()+e*p;return D.w(h,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var o=e||"YYYY-MM-DDTHH:mm:ssZ",n=D.z(this),i=this.$locale(),r=this.$H,s=this.$m,a=this.$M,u=i.weekdays,l=i.months,c=function(e,n,i,r){return e&&(e[n]||e(t,o))||i[n].substr(0,r)},f=function(e){return D.s(r%12||12,e,"0")},p=i.meridiem||function(e,t,o){var n=e<12?"AM":"PM";return o?n.toLowerCase():n},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:D.s(a+1,2,"0"),MMM:c(i.monthsShort,a,l,3),MMMM:c(l,a),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,u,2),ddd:c(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:D.s(r,2,"0"),h:f(1),hh:f(2),a:p(r,s,!0),A:p(r,s,!1),m:String(s),mm:D.s(s,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:n};return o.replace(d,(function(e,t){return t||h[e]||n.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,l,c){var d,f=D.p(l),p=w(e),h=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=D.m(this,p);return g=(d={},d[u]=g/12,d[s]=g,d[a]=g/3,d[r]=(m-h)/6048e5,d[i]=(m-h)/864e5,d[n]=m/36e5,d[o]=m/6e4,d[t]=m/1e3,d)[f]||m,c?g:D.a(g)},p.daysInMonth=function(){return this.endOf(s).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var o=this.clone(),n=v(e,t,!0);return n&&(o.$L=n),o},p.clone=function(){return D.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),b=y.prototype;return w.prototype=b,[["$ms",e],["$s",t],["$m",o],["$H",n],["$W",i],["$M",s],["$y",u],["$D",l]].forEach((function(e){b[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,y,w),e.$i=!0),w},w.locale=v,w.isDayjs=T,w.unix=function(e){return w(1e3*e)},w.en=g[m],w.Ls=g,w.p={},w}()},6607:function(e){e.exports=function(){"use strict";return function(e,t,o){t.prototype.isBetween=function(e,t,n,i){var r=o(e),s=o(t),a="("===(i=i||"()")[0],u=")"===i[1];return(a?this.isAfter(r,n):!this.isBefore(r,n))&&(u?this.isBefore(s,n):!this.isAfter(s,n))||(a?this.isBefore(r,n):!this.isAfter(r,n))&&(u?this.isAfter(s,n):!this.isBefore(s,n))}}}()},9542:function(e){e.exports=function(){"use strict";var e="day";return function(t,o,n){var i=function(t){return t.add(4-t.isoWeekday(),e)},r=o.prototype;r.isoWeekYear=function(){return i(this).year()},r.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var o,r,s,a=i(this),u=(o=this.isoWeekYear(),s=4-(r=(this.$u?n.utc:n)().year(o).startOf("year")).isoWeekday(),r.isoWeekday()>4&&(s+=7),r.add(s,e));return a.diff(u,"week")+1},r.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var s=r.startOf;r.startOf=function(e,t){var o=this.$utils(),n=!!o.u(t)||t;return"isoweek"===o.p(e)?n?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):s.bind(this)(e,t)}}}()},4110:function(e){e.exports=function(){"use strict";return function(e,t,o){e=e||{};var n=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(e,t,o,i){return n.fromToBase(e,t,o,i)}o.en.relativeTime=i,n.fromToBase=function(t,n,r,s,a){for(var u,l,c,d=r.$locale().relativeTime||i,f=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=f.length,h=0;h<p;h+=1){var m=f[h];m.d&&(u=s?o(t).diff(r,m.d,!0):r.diff(t,m.d,!0));var g=(e.rounding||Math.round)(Math.abs(u));if(c=u>0,g<=m.r||!m.r){g<=1&&h>0&&(m=f[h-1]);var T=d[m.l];a&&(g=a(""+g)),l="string"==typeof T?T.replace("%d",g):T(g,n,m.l,c);break}}if(n)return l;var v=c?d.future:d.past;return"function"==typeof v?v(l):v.replace("%s",l)},n.to=function(e,t){return r(e,t,this,!0)},n.from=function(e,t){return r(e,t,this)};var s=function(e){return e.$u?o.utc():o()};n.toNow=function(e){return this.to(s(this),e)},n.fromNow=function(e){return this.from(s(this),e)}}}()},2705:(e,t,o)=>{var n=o(5639).Symbol;e.exports=n},4636:(e,t,o)=>{var n=o(2545),i=o(5694),r=o(1469),s=o(4144),a=o(5776),u=o(6719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var o=r(e),c=!o&&i(e),d=!o&&!c&&s(e),f=!o&&!c&&!d&&u(e),p=o||c||d||f,h=p?n(e.length,String):[],m=h.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||h.push(g);return h}},9932:e=>{e.exports=function(e,t){for(var o=-1,n=null==e?0:e.length,i=Array(n);++o<n;)i[o]=t(e[o],o,e);return i}},4311:(e,t,o)=>{var n=o(9877);e.exports=function(e){var t=e.length;return t?e[n(0,t-1)]:void 0}},4239:(e,t,o)=>{var n=o(2705),i=o(9607),r=o(2333),s=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):r(e)}},9454:(e,t,o)=>{var n=o(4239),i=o(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},8749:(e,t,o)=>{var n=o(4239),i=o(1780),r=o(7005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return r(e)&&i(e.length)&&!!s[n(e)]}},280:(e,t,o)=>{var n=o(5726),i=o(6916),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var o in Object(e))r.call(e,o)&&"constructor"!=o&&t.push(o);return t}},9877:e=>{var t=Math.floor,o=Math.random;e.exports=function(e,n){return e+t(o()*(n-e+1))}},4992:(e,t,o)=>{var n=o(4311),i=o(2628);e.exports=function(e){return n(i(e))}},2545:e=>{e.exports=function(e,t){for(var o=-1,n=Array(e);++o<e;)n[o]=t(o);return n}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},7415:(e,t,o)=>{var n=o(9932);e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},1957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},9607:(e,t,o)=>{var n=o(2705),i=Object.prototype,r=i.hasOwnProperty,s=i.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),o=e[a];try{e[a]=void 0;var n=!0}catch(e){}var i=s.call(e);return n&&(t?e[a]=o:delete e[a]),i}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,o){var n=typeof e;return!!(o=null==o?9007199254740991:o)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<o}},5726:e=>{var t=Object.prototype;e.exports=function(e){var o=e&&e.constructor;return e===("function"==typeof o&&o.prototype||t)}},6916:(e,t,o)=>{var n=o(5569)(Object.keys,Object);e.exports=n},1167:(e,t,o)=>{e=o.nmd(e);var n=o(1957),i=t&&!t.nodeType&&t,r=i&&e&&!e.nodeType&&e,s=r&&r.exports===i&&n.process,a=function(){try{return r&&r.require&&r.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(o){return e(t(o))}}},5639:(e,t,o)=>{var n=o(1957),i="object"==typeof self&&self&&self.Object===Object&&self,r=n||i||Function("return this")();e.exports=r},5694:(e,t,o)=>{var n=o(9454),i=o(7005),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,o)=>{var n=o(3560),i=o(1780);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},4144:(e,t,o)=>{e=o.nmd(e);var n=o(5639),i=o(5062),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,a=s&&s.exports===r?n.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u},3560:(e,t,o)=>{var n=o(4239),i=o(3218);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6719:(e,t,o)=>{var n=o(8749),i=o(7518),r=o(1167),s=r&&r.isTypedArray,a=s?i(s):n;e.exports=a},3674:(e,t,o)=>{var n=o(4636),i=o(280),r=o(8612);e.exports=function(e){return r(e)?n(e):i(e)}},5534:(e,t,o)=>{var n=o(4311),i=o(4992),r=o(1469);e.exports=function(e){return(r(e)?n:i)(e)}},5062:e=>{e.exports=function(){return!1}},2628:(e,t,o)=>{var n=o(7415),i=o(3674);e.exports=function(e){return null==e?[]:n(e,i(e))}},179:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TheTask=void 0;const n=o(112);t.TheTask=class{constructor(e){var t,o,i,r,s,a,u,l,c,d;this.title=e.title,this.lineNumber=e.lineNumber,this.indentLvl=e.indentLvl,this.subtasks=null!==(t=e.subtasks)&&void 0!==t?t:[],this.rawText=e.rawText,this.done=null!==(o=e.done)&&void 0!==o&&o,this.tags=null!==(i=e.tags)&&void 0!==i?i:[],this.projects=null!==(r=e.projects)&&void 0!==r?r:[],this.priority=null!==(s=e.priority)&&void 0!==s?s:n.extensionConfig.defaultPriority,this.links=null!==(a=e.links)&&void 0!==a?a:[],this.due=e.due,this.dueRange=e.dueRange,this.count=e.count,this.threshold=e.threshold,this.isHidden=e.isHidden,this.isCollapsed=e.isCollapsed,this.overdue=e.overdue,this.parentTaskLineNumber=e.parentTaskLineNumber,this.contexts=null!==(u=e.contexts)&&void 0!==u?u:[],this.specialTagRanges=null!==(l=e.specialTagRanges)&&void 0!==l?l:[],this.contextRanges=null!==(c=e.contextRanges)&&void 0!==c?c:[],this.projectRanges=null!==(d=e.projectRanges)&&void 0!==d?d:[],this.priorityRange=e.priorityRange,this.tagsDelimiterRanges=e.tagsDelimiterRanges,this.tagsRange=e.tagsRange,this.overdueRange=e.overdueRange,this.collapseRange=e.collapseRange,this.completionDateRange=e.completionDateRange}getNestedTasksLineNumbers(e=this.subtasks){const t=[];for(const o of e)t.push(o.lineNumber),o.subtasks&&t.push(...this.getNestedTasksLineNumbers(o.subtasks));return t}isRoot(){return void 0!==this.parentTaskLineNumber}hasNestedTasks(){return 0!==this.subtasks.length}static formatTask(e){return e.title+(e.count?` ${e.count.current}/${e.count.needed}`:"")}}},5049:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.applyEdit=t.updateArchivedTasks=t.checkArchiveFileAndNotify=t.checkDefaultFileAndNotify=t.registerAllCommands=void 0;const a=s(o(7484)),u=s(o(5747)),l=s(o(5534)),c=r(o(7549)),d=o(4295),f=o(1046),p=o(9242),h=o(112),m=o(8306),g=o(4158),T=o(8720),v=o(179),w=o(4738),D=o(667),y=o(855),b=o(4291),k=o(974),x=o(4523),C=o(4641);async function _(){const e="Specify";return h.extensionConfig.defaultFile?!!u.default.existsSync(h.extensionConfig.defaultFile)||(await c.window.showErrorMessage("Default file does not exist.",e)===e&&E(),!1):(await c.window.showWarningMessage("Default file is not specified.",e)===e&&E(),!1)}async function A(){const e="Specify";return h.extensionConfig.defaultArchiveFile?!!u.default.existsSync(h.extensionConfig.defaultArchiveFile)||(await c.window.showErrorMessage("Specified default archive file does not exist.",e)===e&&S(),!1):(await c.window.showWarningMessage("Default archive file is not specified.",e)===e&&S(),!1)}function E(){x.openSettingGuiAt("todomd.defaultFile")}function S(){x.openSettingGuiAt("todomd.defaultArchiveFile")}async function O(e,t){return await c.workspace.applyEdit(e),await t.save()}t.registerAllCommands=function(){async function e(e,t){const o=h.extensionConfig.addCreationDate?`{cr:${D.getDateInISOFormat(new Date,h.extensionConfig.creationDateIncludeTime)}} `:"";return await d.appendTaskToFile(`${o}${e}`,t)}c.commands.registerCommand("todomd.toggleDone",(async e=>{const t=c.window.activeTextEditor;let o,n=[];if(e)n.push(e.task.lineNumber),o=await d.getActiveDocument();else{if(!t)return;for(const e of t.selections)for(let t=e.start.line;t<=e.end.line;t++)n.push(t);n=Array.from(new Set(n)),o=t.document}for(const e of n)await d.toggleDoneOrIncrementCount(o,e);await h.updateState(),y.updateAllTreeViews()})),c.commands.registerCommand("todomd.hideTask",(async e=>{if(!e)return;const t=e.task.lineNumber,o=await d.getActiveDocument();d.hideTask(o,t),await h.updateState(),y.updateAllTreeViews()})),c.commands.registerCommand("todomd.collapseAllNestedTasks",(async()=>{const e=new c.WorkspaceEdit,t=await d.getActiveDocument();b.forEachTask((o=>{o.hasNestedTasks()&&!o.isCollapsed&&d.toggleTaskCollapseWorkspaceEdit(e,t,o.lineNumber)})),await O(e,t),p.updateEverything(),C.updateWebviewView()})),c.commands.registerCommand("todomd.expandAllTasks",(async()=>{const e=new c.WorkspaceEdit,t=await d.getActiveDocument();b.forEachTask((o=>{o.hasNestedTasks()&&o.isCollapsed&&d.toggleTaskCollapseWorkspaceEdit(e,t,o.lineNumber)})),await O(e,t),p.updateEverything(),C.updateWebviewView()})),c.commands.registerCommand("todomd.deleteTask",(async e=>{if(!e)return;const t=e.task.lineNumber,o=await d.getActiveDocument();await d.tryToDeleteTask(o,t),await h.updateState(),y.updateAllTreeViews()})),c.commands.registerTextEditorCommand("todomd.archiveCompletedTasks",(e=>{const t=h.state.tasks.filter((e=>e.done));d.archiveTasks(t,e.document)})),c.commands.registerTextEditorCommand("todomd.archiveSelectedCompletedTasks",(e=>{const t=e.selection,o=[];for(let e=t.start.line;e<=t.end.line;e++){const t=T.findTaskAtLineExtension(e);t&&t.done&&o.push(t)}d.archiveTasks(o,e.document)})),c.commands.registerTextEditorCommand("todomd.sortByPriority",((e,t)=>{const o=e.selection;if(o.isEmpty)return void c.default.window.showInformationMessage("Select tasks to sort");const n=o.start.line,i=o.end.line,r=[];for(let e=n;e<=i;e++){const t=T.findTaskAtLineExtension(e);t&&r.push(t)}const s=g.sortTasks(r,0).map((e=>e.rawText)).join("\n");t.replace(x.getFullRangeFromLines(e.document,n,i),s)})),c.commands.registerTextEditorCommand("todomd.createSimilarTask",(async e=>{const t=e.selection,o=T.findTaskAtLineExtension(t.start.line);if(!o)return;const n=e.document.lineAt(o.lineNumber),i=new c.WorkspaceEdit,r=o.tags.map((e=>` #${e}`)).join(""),s=o.projects.map((e=>`+${e}`)).join(" "),a=o.contexts.map((e=>`@${e}`)).join(" ");let u=r;u+=s?` ${s}`:"",u+=a?` ${a}`:"",i.insert(e.document.uri,new c.default.Position(n.rangeIncludingLineBreak.end.line,n.rangeIncludingLineBreak.end.character),`${u}\n`),await O(i,e.document),e.selection=new c.default.Selection(n.lineNumber+1,0,n.lineNumber+1,0)})),c.commands.registerCommand("todomd.getNextTask",(async()=>{await h.updateState();const e=h.state.tasks.filter((e=>!e.done));if(!e.length)return void c.default.window.showInformationMessage("No tasks");const t=g.defaultSortTasks(e)[0];if(t.links.length){const e="Follow link";await c.default.window.showInformationMessage(v.TheTask.formatTask(t),e)===e&&x.followLinks(t.links)}else c.default.window.showInformationMessage(v.TheTask.formatTask(t))})),c.commands.registerCommand("todomd.getFewNextTasks",(async()=>{await h.updateState();const e=h.state.tasks.filter((e=>!e.done));if(!e.length)return void c.default.window.showInformationMessage("No tasks");const t=g.defaultSortTasks(e).slice(0,h.extensionConfig.getNextNumberOfTasks);c.default.window.showInformationMessage(t.map(((e,t)=>`${k.fancyNumber(t+1)} ${v.TheTask.formatTask(e)}`)).join("\n"),{modal:!0})})),c.commands.registerCommand("todomd.getRandomTask",(async()=>{await h.updateState();const e=h.state.tasks.filter((e=>!e.done));e.length?c.window.showInformationMessage(v.TheTask.formatTask(l.default(e))):c.default.window.showInformationMessage("No tasks")})),c.commands.registerCommand("todomd.addTaskToDefaultFile",(async()=>{if(!await _())return;const t=await c.window.showInputBox({prompt:"Add a task to default file"});t&&(await e(t,h.extensionConfig.defaultFile),await h.updateState(),y.updateAllTreeViews())})),c.commands.registerCommand("todomd.addTaskToActiveFile",(async()=>{var t;const o=null===(t=h.state.activeDocument)||void 0===t?void 0:t.uri.fsPath;if(!o)return;const n=await c.window.showInputBox({prompt:"Add a task to active file"});n&&(e(n,o),await h.updateState(),y.updateAllTreeViews())})),c.commands.registerTextEditorCommand("todomd.setDueDate",(e=>{const t=e.selection.active.line,o=c.window.createInputBox();let n="+0";o.value=n,o.title="Set due date";const i="Documentation";o.onDidTriggerButton((e=>{e.tooltip===i&&x.followLink("https://github.com/usernamehw/vscode-todo-md/blob/master/docs/docs.md#set-due-date-helper-function-todomdsetduedate")})),o.buttons=[{iconPath:new c.ThemeIcon("question"),tooltip:i}],o.prompt=x.inputOffset(new f.DueDate(w.helpCreateDueDate(n)).closestDueDateInTheFuture),o.show(),o.onDidChangeValue((e=>{n=e;const t=w.helpCreateDueDate(n);o.prompt=t?x.inputOffset(new f.DueDate(t).closestDueDateInTheFuture):x.inputOffset("❌")})),o.onDidAccept((()=>{if(!n)return;const i=w.helpCreateDueDate(n);i&&(d.setDueDate(e.document,t,i),o.hide(),o.dispose())}))})),c.commands.registerCommand("todomd.setDueDateWithArgs",(async(e,t,o)=>{const n=t.start.line,i=new c.WorkspaceEdit;i.delete(e.uri,t),await O(i,e),d.setDueDate(e,n,o)})),c.commands.registerCommand("todomd.openDefaultArvhiveFile",(async()=>{await A()&&x.openFileInEditor(h.extensionConfig.defaultArchiveFile)})),c.commands.registerCommand("todomd.openDefaultFile",(async()=>{await _()&&x.openFileInEditor(h.extensionConfig.defaultFile)})),c.commands.registerCommand("todomd.specifyDefaultFile",E),c.commands.registerCommand("todomd.completeTask",(async()=>{const e=await d.getActiveDocument(),t=h.state.tasks.filter((e=>!e.done)).map((e=>v.TheTask.formatTask(e))),o=await c.window.showQuickPick(t,{placeHolder:"Choose a task to complete"});if(!o)return;const n=h.state.tasks.find((e=>v.TheTask.formatTask(e)===o));n&&(n.count?await d.incrementCountForTask(e,n.lineNumber,n):await d.toggleDoneAtLine(e,n.lineNumber),await h.updateState(),y.updateAllTreeViews())})),c.commands.registerTextEditorCommand("todomd.filter",(e=>{const t=c.window.createQuickPick();let o,n;t.items=h.extensionConfig.savedFilters.map((e=>({label:e.title}))),t.onDidChangeValue((e=>{o=e})),t.onDidChangeSelection((e=>{n=e[0].label})),t.show(),t.onDidAccept((()=>{var e;let i;i=n?null===(e=h.extensionConfig.savedFilters.find((e=>e.title===n)))||void 0===e?void 0:e.filter:o,t.hide(),t.dispose(),i&&i.length&&(y.tasksView.description=i,x.setContext("todomd:filterActive",!0),h.state.taskTreeViewFilterValue=i,y.updateTasksTreeView())}))})),c.commands.registerCommand("todomd.clearFilter",(e=>{y.tasksView.description=void 0,x.setContext("todomd:filterActive",!1),h.state.taskTreeViewFilterValue="",y.updateTasksTreeView()})),c.commands.registerCommand("todomd.clearGlobalState",(()=>{h.state.extensionContext.globalState._value={},h.state.extensionContext.globalState.update("hack","toClear")})),c.commands.registerCommand("todomd.showGlobalState",(()=>{const e=h.state.extensionContext.globalState.get(h.LAST_VISIT_BY_FILE_STORAGE_KEY);for(const t in e)console.log(t,new Date(e[t]),a.default().to(e[t]))})),c.commands.registerCommand("todomd.goToLine",(e=>{d.goToTask(e)})),c.commands.registerTextEditorCommand("todomd.resetAllRecurringTasks",(e=>{const t=h.state.lastVisitByFile[e.document.uri.toString()];d.resetAllRecurringTasks(e.document,t)})),c.commands.registerCommand("todomd.followLink",(e=>{x.followLinks(e.task.links)})),c.commands.registerTextEditorCommand("todomd.setLastVisit",(async e=>{const t=Number(await c.default.window.showInputBox({prompt:"Number of Hours ago"}));t&&h.updateLastVisitGlobalState(e.document.uri.toString(),a.default().subtract(t,"hour").toDate())})),c.commands.registerTextEditorCommand("todomd.incrementPriority",(e=>{const t=e.selection.active.line;d.incrementOrDecrementPriority(e.document,t,"increment")})),c.commands.registerTextEditorCommand("todomd.decrementPriority",(e=>{const t=e.selection.active.line;d.incrementOrDecrementPriority(e.document,t,"decrement")})),c.commands.registerCommand("todomd.showWebviewSettings",(e=>{x.openSettingGuiAt("todomd.webview")})),c.commands.registerTextEditorCommand("todomd.toggleComment",(e=>{const t=new c.WorkspaceEdit,o=e.selections;for(const n of o){const o=n.start.line,i=n.end.line;for(let n=o;n<=i;n++)d.toggleCommentAtLineWorkspaceEdit(t,e.document,n)}O(t,e.document)}))},t.checkDefaultFileAndNotify=_,t.checkArchiveFileAndNotify=A,t.updateArchivedTasks=async function(){if(!h.extensionConfig.defaultArchiveFile)return;const e=await c.workspace.openTextDocument(c.default.Uri.file(h.extensionConfig.defaultArchiveFile)),t=await m.parseDocument(e);h.state.archivedTasks=t.tasks,y.updateArchivedTasksTreeView()},t.applyEdit=O},3767:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateCompletions=void 0;const i=n(o(7484)),r=n(o(7549)),s=o(1046),a=o(112),u=o(4738),l=o(667),c=o(4523);t.updateCompletions=function(){a.Global.tagAutocompleteDisposable&&(a.Global.tagAutocompleteDisposable.dispose(),a.Global.projectAutocompleteDisposable.dispose(),a.Global.contextAutocompleteDisposable.dispose(),a.Global.generalAutocompleteDisposable.dispose()),a.Global.tagAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const o=c.getWordAtPosition(e,t);if(!o||!o.startsWith("#"))return;const n=[],i=Array.from(new Set(a.state.tags.concat(a.extensionConfig.tags)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["#"],n.push(t)}return n}},"#"),a.Global.projectAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const o=c.getWordAtPosition(e,t);if(!o||!o.startsWith("+"))return;const n=[],i=Array.from(new Set(a.state.projects.concat(a.extensionConfig.projects)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["+"],n.push(t)}return n}},"+"),a.Global.contextAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const o=c.getWordAtPosition(e,t);if(!o||!o.startsWith("@"))return;const n=[],i=Array.from(new Set(a.state.contexts.concat(a.extensionConfig.contexts)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["@"],n.push(t)}return n}},"@"),a.Global.generalAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const o=[],n=new r.default.CompletionItem("TODAY",r.default.CompletionItemKind.Constant);n.insertText=l.getDateInISOFormat(new Date);const s=new r.default.CompletionItem("SET_DUE_TODAY",r.default.CompletionItemKind.Constant);s.insertText=`{due:${l.getDateInISOFormat(new Date)}}`;const a=new r.default.CompletionItem("SET_DUE_TOMORROW",r.default.CompletionItemKind.Constant);a.insertText=`{due:${l.getDateInISOFormat(i.default().add(1,"day"))}}`;const u=new r.default.CompletionItem("SET_DUE_YESTERDAY",r.default.CompletionItemKind.Constant);return u.insertText=`{due:${l.getDateInISOFormat(i.default().subtract(1,"day"))}}`,o.push(n,s,a,u),o}},""),a.Global.setDueDateAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const o=c.getWordRangeAtPosition(e,t),n=c.getWordAtPosition(e,t);if(n){if("$"===n[n.length-1]){const t=u.helpCreateDueDate(n.slice(0,-1));if(!t)return[];const i=new r.default.CompletionItem(new s.DueDate(t).closestDueDateInTheFuture,r.default.CompletionItemKind.Constant);return i.insertText="",i.filterText=n,i.command={command:"todomd.setDueDateWithArgs",title:"Set Due Date with arguments",arguments:[e,o,t]},[i]}return[]}}},"$")}},1613:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateEditorDecorations=t.updateDecorationStyle=void 0;const s=r(o(7549)),a=o(112);t.updateDecorationStyle=function(){a.Global.completedTaskDecorationType=s.window.createTextEditorDecorationType({isWholeLine:!0,textDecoration:"line-through rgba(255, 255, 255, 0.35)",light:{textDecoration:"line-through rgba(0, 0, 0, 0.25)"}}),a.Global.commentDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.commentForeground"),isWholeLine:!0,...a.extensionConfig.decorations.comment}),a.Global.priorityADecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityAForeground"),...a.extensionConfig.decorations.priorityAForeground}),a.Global.priorityBDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityBForeground"),...a.extensionConfig.decorations.priorityBForeground}),a.Global.priorityCDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityCForeground"),...a.extensionConfig.decorations.priorityCForeground}),a.Global.priorityDDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityDForeground"),...a.extensionConfig.decorations.priorityDForeground}),a.Global.priorityEDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityEForeground"),...a.extensionConfig.decorations.priorityEForeground}),a.Global.priorityFDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityFForeground"),...a.extensionConfig.decorations.priorityFForeground}),a.Global.tagsDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.tagForeground")}),a.Global.specialTagDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.specialTagForeground")}),a.Global.tagsDelimiterDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.tagDelimiterForeground")}),a.Global.projectDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.projectForeground"),...a.extensionConfig.decorations.project}),a.Global.contextDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.contextForeground"),...a.extensionConfig.decorations.context}),a.Global.notDueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.notDueForeground"),...a.extensionConfig.decorations.notDue}),a.Global.dueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.dueForeground"),...a.extensionConfig.decorations.due}),a.Global.overdueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.overdueForeground"),...a.extensionConfig.decorations.overdue}),a.Global.invalidDueDateDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.invalidDueDateForeground"),backgroundColor:new s.default.ThemeColor("todomd.invalidDueDateBackground"),...a.extensionConfig.decorations.invalidDue}),a.Global.closestDueDateDecorationType=s.window.createTextEditorDecorationType({after:{color:new s.default.ThemeColor("todomd.closestDueDateForeground"),margin:"1ch",backgroundColor:new s.default.ThemeColor("todomd.closestDueDateBackground")}})},t.updateEditorDecorations=function(e){const t=[],o=[],n=[],i=[],r=[],u=[],l=[],c=[],d=[],f=[],p=[],h=[],m=[],g=[],T=[],v=[],w=[];for(const e of a.state.tasks){if(e.done&&t.push(new s.default.Range(e.lineNumber,0,e.lineNumber,0)),e.tagsRange&&(o.push(...e.tagsRange),d.push(...e.tagsDelimiterRanges)),e.priorityRange)switch(e.priority){case"A":n.push(e.priorityRange);break;case"B":i.push(e.priorityRange);break;case"C":r.push(e.priorityRange);break;case"D":u.push(e.priorityRange);break;case"E":l.push(e.priorityRange);break;default:c.push(e.priorityRange)}if(e.specialTagRanges.length&&f.push(...e.specialTagRanges),e.contextRanges&&e.contextRanges.length&&h.push(...e.contextRanges),e.projectRanges&&e.projectRanges.length&&p.push(...e.projectRanges),e.due){const t=e.due,o=e.dueRange;1===t.isDue?g.push(o):0===t.isDue?m.push(o):2===t.isDue?(T.push(o),e.overdueRange&&f.push(e.overdueRange)):3===t.isDue&&v.push(o),0===t.isDue&&t.closestDueDateInTheFuture&&w.push({range:new s.default.Range(o.end.line,o.end.character-1,o.end.line,o.end.character-1),renderOptions:{after:{contentText:t.closestDueDateInTheFuture}}})}}e.setDecorations(a.Global.completedTaskDecorationType,t),e.setDecorations(a.Global.tagsDecorationType,o),e.setDecorations(a.Global.specialTagDecorationType,f),e.setDecorations(a.Global.priorityADecorationType,n),e.setDecorations(a.Global.priorityBDecorationType,i),e.setDecorations(a.Global.priorityCDecorationType,r),e.setDecorations(a.Global.priorityDDecorationType,u),e.setDecorations(a.Global.priorityEDecorationType,l),e.setDecorations(a.Global.priorityFDecorationType,c),e.setDecorations(a.Global.tagsDelimiterDecorationType,d),e.setDecorations(a.Global.projectDecorationType,p),e.setDecorations(a.Global.contextDecorationType,h),e.setDecorations(a.Global.notDueDecorationType,m),e.setDecorations(a.Global.dueDecorationType,g),e.setDecorations(a.Global.overdueDecorationType,T),e.setDecorations(a.Global.invalidDueDateDecorationType,v),e.setDecorations(a.Global.closestDueDateDecorationType,w),e.setDecorations(a.Global.commentDecorationType,a.state.commentLines)}},4295:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCommentAtLineWorkspaceEdit=t.appendTaskToFile=t.getDocumentForDefaultFile=t.getActiveDocument=t.resetAllRecurringTasks=t.goToTask=t.setCountCurrentValueEdit=t.archiveTaskWorkspaceEdit=t.archiveTasks=t.removeCompletionDateWorkspaceEdit=t.toggleDoneAtLine=t.removeDoneSymbolEdit=t.insertCompletionDateEdit=t.incrementOrDecrementPriority=t.decrementCountForTask=t.incrementCountForTask=t.toggleDoneOrIncrementCount=t.deleteTaskWorkspaceEdit=t.tryToDeleteTask=t.setDueDate=t.toggleTaskCollapseWorkspaceEdit=t.toggleTaskCollapse=t.hideTask=void 0;const a=s(o(7484)),u=r(o(7549)),l=o(5049),c=o(1046),d=o(112),f=o(8306),p=o(8720),h=o(667);function m(e,t,o){const n=t.lineAt(o),i=p.findTaskAtLineExtension(o);(null==i?void 0:i.collapseRange)?e.delete(t.uri,i.collapseRange):e.insert(t.uri,n.range.end," {c}")}function g(e,t,o){e.delete(t.uri,t.lineAt(o).rangeIncludingLineBreak)}async function T(e,t,o){const n=e.lineAt(t),i=new u.WorkspaceEdit,r=o.count;if(!r)return Promise.resolve(void 0);let s=0;return r.current!==r.needed?(s=r.current+1,s===r.needed&&(w(i,e.uri,n),v(i,e.uri,o)),_(i,e.uri,r,String(s))):(_(i,e.uri,r,"0"),b(i,e.uri,o)),l.applyEdit(i,e)}function v(e,t,o){o.overdueRange&&e.delete(t,o.overdueRange)}function w(e,t,o){e.insert(t,new u.default.Position(o.lineNumber,o.range.end.character),` {cm:${h.getDateInISOFormat(new Date,d.extensionConfig.completionDateIncludeTime)}}`)}function D(e,t,o){o.text.trim().startsWith(d.extensionConfig.doneSymbol)&&e.delete(t,new u.default.Range(o.lineNumber,o.firstNonWhitespaceCharacterIndex,o.lineNumber,o.firstNonWhitespaceCharacterIndex+d.extensionConfig.doneSymbol.length))}async function y(e,t){const{firstNonWhitespaceCharacterIndex:o}=e.lineAt(t),n=p.findTaskAtLineExtension(t);if(!n)return;n.overdue&&await async function(e,t){const o=new u.WorkspaceEdit;return v(o,e.uri,t),l.applyEdit(o,e)}(e,n);const i=e.lineAt(t),r=new u.WorkspaceEdit;n.done?d.extensionConfig.addCompletionDate?b(r,e.uri,n):i.text.trim().startsWith(d.extensionConfig.doneSymbol)&&r.delete(e.uri,new u.default.Range(t,o,t,o+d.extensionConfig.doneSymbol.length)):d.extensionConfig.addCompletionDate?w(r,e.uri,i):r.insert(e.uri,new u.default.Position(t,o),d.extensionConfig.doneSymbol),await l.applyEdit(r,e),d.extensionConfig.autoArchiveTasks&&await k([n],e)}function b(e,t,o){o.completionDateRange&&e.delete(t,o.completionDateRange)}async function k(e,t){var o;if(!await l.checkArchiveFileAndNotify())return;const n=new u.WorkspaceEdit,i=new u.WorkspaceEdit,r=u.default.Uri.file(d.extensionConfig.defaultArchiveFile),s=await u.default.workspace.openTextDocument(r);let a=[];for(const t of e)void 0===t.parentTaskLineNumber&&((null===(o=t.due)||void 0===o?void 0:o.isRecurring)||(a.push(t.lineNumber),t.subtasks.length&&a.push(...t.getNestedTasksLineNumbers())));a=Array.from(new Set(a));for(const e of a){if(!p.findTaskAtLineExtension(e))continue;const o=t.lineAt(e);x(n,i,s,t.uri,o,!0)}await l.applyEdit(n,t),await l.applyEdit(i,s),l.updateArchivedTasks()}function x(e,t,o,n,i,r){!function(e,t,o){const n=t.lineAt(t.lineCount-1).rangeIncludingLineBreak.end;e.insert(t.uri,n,`\n${o}`)}(t,o,i.text),r&&e.delete(n,i.rangeIncludingLineBreak)}function C(e,t,o,n){e.insert(t,new u.default.Position(o.lineNumber,o.range.end.character),` {overdue:${n}}`)}function _(e,t,o,n){const i=o.range.start.character+"count:".length+1,r=new u.default.Range(o.range.start.line,i,o.range.start.line,i+String(o.current).length);e.replace(t,r,String(n))}async function A(){if(void 0===d.state.activeDocument)throw u.default.window.showErrorMessage("No active document"),new Error("No active document");return d.state.activeDocument.isClosed&&(d.state.activeDocument=await u.default.workspace.openTextDocument(d.state.activeDocument.uri)),d.state.activeDocument}t.hideTask=async function(e,t){const o=new u.WorkspaceEdit,n=e.lineAt(t);return o.insert(e.uri,n.range.end," {h}"),l.applyEdit(o,e)},t.toggleTaskCollapse=async function(e,t){const o=new u.WorkspaceEdit;return m(o,e,t),l.applyEdit(o,e)},t.toggleTaskCollapseWorkspaceEdit=m,t.setDueDate=async function(e,t,o){const n=`{due:${o}}`,i=new u.WorkspaceEdit,r=p.findTaskAtLineExtension(t);if((null==r?void 0:r.overdueRange)&&i.delete(e.uri,r.overdueRange),null==r?void 0:r.dueRange)i.replace(e.uri,r.dueRange,n);else{const o=e.lineAt(t),r=o.text.endsWith(" ");i.insert(e.uri,o.range.end,`${r?"":" "}${n}`)}return await l.applyEdit(i,e)},t.tryToDeleteTask=async function(e,t){const o=p.findTaskAtLineExtension(t);if(!o)return;const n=new u.WorkspaceEdit;let i="",r=!1;const s=[t];if(o.subtasks.length&&(s.push(...o.getNestedTasksLineNumbers()),i=`\n ❗ [ ${o.subtasks.length+1} ] tasks will be deleted.`),("always"===d.extensionConfig.confirmTaskDelete||"hasNestedTasks"===d.extensionConfig.confirmTaskDelete&&o.subtasks.length)&&(r=!0),r){const e="Delete";if(await u.default.window.showWarningMessage(`Confirm deletion?${i}`,{modal:!0},e)!==e)return}for(const t of s)g(n,e,t);return l.applyEdit(n,e)},t.deleteTaskWorkspaceEdit=g,t.toggleDoneOrIncrementCount=async function(e,t){const o=p.findTaskAtLineExtension(t);if(o)return o.count?await T(e,t,o):void await y(e,t)},t.incrementCountForTask=T,t.decrementCountForTask=async function(e,t,o){const n=new u.WorkspaceEdit,i=o.count;return i?0===i.current?Promise.resolve(void 0):(i.current===i.needed&&b(n,e.uri,o),_(n,e.uri,i,String(i.current-1)),l.applyEdit(n,e)):Promise.resolve(void 0)},t.incrementOrDecrementPriority=async function(e,t,o){const n=p.findTaskAtLineExtension(t);if(!n||"increment"===o&&"A"===n.priority||"decrement"===o&&"Z"===n.priority)return;const i="increment"===o?String.fromCharCode(n.priority.charCodeAt(0)-1):String.fromCharCode(n.priority.charCodeAt(0)+1),r=new u.WorkspaceEdit;return n.priorityRange?r.replace(e.uri,n.priorityRange,`(${i})`):r.insert(e.uri,new u.default.Position(t,0),`(${i}) `),l.applyEdit(r,e)},t.insertCompletionDateEdit=w,t.removeDoneSymbolEdit=D,t.toggleDoneAtLine=y,t.removeCompletionDateWorkspaceEdit=b,t.archiveTasks=k,t.archiveTaskWorkspaceEdit=x,t.setCountCurrentValueEdit=_,t.goToTask=async function(e){const t=await A(),o=await u.default.window.showTextDocument(t),n=new u.default.Range(e,0,e,0);o.selection=new u.default.Selection(n.start,n.end),o.revealRange(n,u.default.TextEditorRevealType.Default);const i=u.default.window.createTextEditorDecorationType({backgroundColor:"#ffa30468",isWholeLine:!0});o.setDecorations(i,[n]),setTimeout((()=>{o.setDecorations(i,[])}),700)},t.resetAllRecurringTasks=async function(e,t=new Date){var o;"string"==typeof t&&(t=new Date(t));const n=new u.WorkspaceEdit,i=(await f.parseDocument(e)).tasks;for(const r of i)if(null===(o=r.due)||void 0===o?void 0:o.isRecurring){const o=e.lineAt(r.lineNumber);if(r.done)D(n,e.uri,o),b(n,e.uri,r);else if(!r.overdue&&!a.default().isSame(t,"day")){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate()),s=new Date,u=new Date(s.getFullYear(),s.getMonth(),s.getDate());for(let t=a.default(u).diff(i,"day");t>0;t--){const i=a.default().subtract(t,"day"),s=new c.DueDate(r.due.raw,{targetDate:i.toDate()});if(1===s.isDue||2===s.isDue){C(n,e.uri,o,i.format(h.DATE_FORMAT));break}}}const i=r.count;i&&_(n,e.uri,i,"0")}return l.applyEdit(n,e)},t.getActiveDocument=A,t.getDocumentForDefaultFile=async function(){if(d.extensionConfig.defaultFile)return await u.default.workspace.openTextDocument(u.default.Uri.file(d.extensionConfig.defaultFile))},t.appendTaskToFile=async function(e,t){const o=u.default.Uri.file(t),n=await u.default.workspace.openTextDocument(o),i=new u.WorkspaceEdit,r=n.lineAt(n.lineCount-1).rangeIncludingLineBreak.end;return i.insert(o,r,`\n${e}`),l.applyEdit(i,n)},t.toggleCommentAtLineWorkspaceEdit=function(e,t,o){t.lineAt(o).text.startsWith("# ")?e.delete(t.uri,new u.default.Range(o,0,o,2)):e.insert(t.uri,new u.default.Position(o,0),"# ")}},1046:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DueDate=void 0;const i=n(o(7484)),r=o(667);class s{constructor(e,t){this.isRecurring=!1,this.isDue=0,this.raw=e;const o=s.parseDue(e,null==t?void 0:t.targetDate,null==t?void 0:t.overdue);this.isRecurring=o.isRecurring,this.isDue=o.isDue,0===o.isDue?this.closestDueDateInTheFuture=this.calcClosestDueDateInTheFuture():1===o.isDue||2===o.isDue?this.closestDueDateInTheFuture=`${r.dayOfTheWeek(i.default())} [today]`:this.closestDueDateInTheFuture=""}calcClosestDueDateInTheFuture(){for(let e=1;e<100;e++){const t=i.default().add(e,"day"),{isDue:o}=s.parseDue(this.raw,t.toDate());if(o)return`${r.dayOfTheWeek(t)} [${r.dateDiff(t)}]`}return"More than 100 days"}static parseDue(e,t=new Date,o){const n=e.split(",").filter((e=>e.length)).map((e=>s.parseDueDate(e,t))),i=n.some((e=>e.isRecurring)),r=n.some((e=>3===e.isDue)),a=n.some((e=>2===e.isDue))||o,u=n.some((e=>1===e.isDue));return{isDue:r?3:a?2:u?1:0,isRecurring:i}}static parseDueDate(e,t){if("today"===e)return{isRecurring:!1,isDue:1};let o=!1,n=0;const i=s.dueWithDateRegexp.exec(e);if(i){const e=Number(i[1]),a=Number(i[2])-1,u=Number(i[3]),l=new Date(e,a,u),c=i[5];if(!r.isValidDate(e,a,u))return{isRecurring:Boolean(c),isDue:3};c?(o=!0,n=s.isDueWithDate(c,l,t)):(n=s.isDueExactDate(l,t),o=!1)}else s.dueRecurringRegexp.test(e)?(o=!0,n=s.isDueToday(e,t)):n=3;return{isDue:n,isRecurring:o}}static isDueExactDate(e,t){return i.default(t).isBefore(e)?0:0===i.default(e).diff(i.default(t),"day")?1:2}static isDueToday(e,t){const o=e.toLowerCase();if("ed"===o)return 1;switch(t.getDay()){case 0:if("sun"===o||"sunday"===o)return 1;break;case 1:if("mon"===o||"monday"===o)return 1;break;case 2:if("tue"===o||"tuesday"===o)return 1;break;case 3:if("wed"===o||"wednesday"===o)return 1;break;case 4:if("thu"===o||"thursday"===o)return 1;break;case 5:if("fri"===o||"friday"===o)return 1;break;case 6:if("sat"===o||"saturday"===o)return 1}return 0}static isDueWithDate(e,t,o=new Date){if(void 0===t)throw new Error("dueDate was specified, but dueDateStart is missing");const n=/e(\d+)(d)/.exec(e);if(n){const e=n[1]?+n[1]:1;if("d"===n[2]&&i.default(o).diff(t,"day")%e==0)return 1}return 0}}t.DueDate=s,s.dueWithDateRegexp=/^(\d\d\d\d)-(\d\d)-(\d\d)(\|(e\d+d))?$/,s.dueRecurringRegexp=/^(ed|sun|sunday|mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday)$/i},9242:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateEverything=t.deactivateEditorFeatures=t.activateEditorFeatures=t.isTheRightFileName=t.onChangeTextDocument=t.checkIfNeedResetRecurringTasks=t.onChangeActiveTextEditor=void 0;const a=s(o(7484)),u=r(o(7549)),l=o(3767),c=o(1613),d=o(4295),f=o(112),p=o(1244),h=o(855),m=o(4523);function g(e){const t=f.state.lastVisitByFile[e];return t?a.default().isSame(t,"day")?void 0:{lastVisit:t}:{lastVisit:new Date}}function T(e){const t=u.window.activeTextEditor;t&&f.state.theRightFileOpened&&y(t)}function v(e){return 0!==u.default.languages.match({pattern:f.extensionConfig.activatePattern},e.document)}async function w(e){f.state.theRightFileOpened=!0,f.Global.changeTextDocumentDisposable=u.workspace.onDidChangeTextDocument(T),l.updateCompletions(),p.updateHover(),f.statusBar.show(),await m.setContext("todomd:isActive",!0);const t=g(e.document.uri.toString());t&&(await d.resetAllRecurringTasks(e.document,t.lastVisit),y(),f.updateLastVisitGlobalState(e.document.uri.toString(),new Date))}function D(){f.state.theRightFileOpened=!1,f.Global.changeTextDocumentDisposable&&f.Global.changeTextDocumentDisposable.dispose(),f.Global.contextAutocompleteDisposable&&(f.Global.contextAutocompleteDisposable.dispose(),f.Global.tagAutocompleteDisposable.dispose(),f.Global.projectAutocompleteDisposable.dispose(),f.Global.generalAutocompleteDisposable.dispose(),f.Global.setDueDateAutocompleteDisposable.dispose()),f.Global.hoverDisposable&&f.Global.hoverDisposable.dispose(),f.statusBar.hide(),m.setContext("todomd:isActive",!1)}async function y(e){await f.updateState(),e&&(c.updateEditorDecorations(e),f.statusBar.updateText(f.state.tasks)),h.updateAllTreeViews()}t.onChangeActiveTextEditor=async function(e){f.state.theRightFileOpened&&D(),e&&v(e)?(f.state.activeDocument=e.document,f.state.activeDocumentTabSize="number"==typeof e.options.tabSize?e.options.tabSize:f.extensionConfig.tabSize,y(e),await w(e)):(f.state.activeDocument=await d.getDocumentForDefaultFile(),f.state.activeDocumentTabSize=f.extensionConfig.tabSize,setTimeout((()=>{y()}),15))},t.checkIfNeedResetRecurringTasks=g,t.onChangeTextDocument=T,t.isTheRightFileName=v,t.activateEditorFeatures=w,t.deactivateEditorFeatures=D,t.updateEverything=y},112:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.updateLastVisitGlobalState=t.updateState=t.activate=t.Global=t.statusBar=t.extensionConfig=t.LAST_VISIT_BY_FILE_STORAGE_KEY=t.EXTENSION_NAME=t.state=void 0;const a=s(o(7484)),u=s(o(6607)),l=s(o(9542)),c=s(o(4110)),d=r(o(7549)),f=o(5049),p=o(1613),h=o(4295),m=o(9242),g=o(8306),T=o(6158),v=o(855),w=o(4523),D=o(4641);a.default.extend(u.default),a.default.extend(c.default),a.default.extend(l.default),a.default.Ls.en.weekStart=1,t.state={tasks:[],tasksAsTree:[],tags:[],projects:[],contexts:[],tagsForTreeView:[],projectsForTreeView:[],contextsForTreeView:[],archivedTasks:[],commentLines:[],theRightFileOpened:!1,lastVisitByFile:{},taskTreeViewFilterValue:"",extensionContext:{},activeDocument:void 0,activeDocumentTabSize:4},t.EXTENSION_NAME="todomd",t.LAST_VISIT_BY_FILE_STORAGE_KEY="LAST_VISIT_BY_FILE_STORAGE_KEY",t.extensionConfig=d.workspace.getConfiguration(t.EXTENSION_NAME),t.statusBar=new T.StatusBar;class y{}async function b(){let e=t.state.activeDocument;if(e||(e=await h.getDocumentForDefaultFile()),!e)return t.state.activeDocument=void 0,t.state.theRightFileOpened=!1,t.state.tasks=[],t.state.tags=[],t.state.contexts=[],t.state.projects=[],t.state.commentLines=[],t.state.projectsForTreeView=[],t.state.tagsForTreeView=[],void(t.state.contextsForTreeView=[]);const o=await g.parseDocument(e);t.state.tasks=o.tasks,t.state.tasksAsTree=o.tasksAsTree,t.state.commentLines=o.commentLines;const n=v.groupAndSortTreeItems(t.state.tasksAsTree);t.state.tagsForTreeView=n.sortedTagsForProvider,t.state.projectsForTreeView=n.projectsForProvider,t.state.contextsForTreeView=n.contextsForProvider,t.state.tags=n.tags,t.state.projects=n.projects,t.state.contexts=n.contexts}function k(){y.completedTaskDecorationType&&(y.completedTaskDecorationType.dispose(),y.commentDecorationType.dispose(),y.priorityADecorationType.dispose(),y.priorityBDecorationType.dispose(),y.priorityCDecorationType.dispose(),y.priorityDDecorationType.dispose(),y.priorityEDecorationType.dispose(),y.priorityFDecorationType.dispose(),y.tagsDecorationType.dispose(),y.specialTagDecorationType.dispose(),y.tagsDelimiterDecorationType.dispose(),y.projectDecorationType.dispose(),y.contextDecorationType.dispose(),y.notDueDecorationType.dispose(),y.dueDecorationType.dispose(),y.overdueDecorationType.dispose(),y.invalidDueDateDecorationType.dispose(),y.closestDueDateDecorationType.dispose()),y.changeTextDocumentDisposable&&y.changeTextDocumentDisposable.dispose()}async function x(e,o){t.state.lastVisitByFile[e]=o,await t.state.extensionContext.globalState.update(t.LAST_VISIT_BY_FILE_STORAGE_KEY,t.state.lastVisitByFile)}t.Global=y,t.activate=async function(e){t.state.extensionContext=e;const o=e.globalState.get(t.LAST_VISIT_BY_FILE_STORAGE_KEY);t.state.lastVisitByFile=o||{},p.updateDecorationStyle(),f.registerAllCommands(),v.createAllTreeViews();const n=await h.getDocumentForDefaultFile();if(n){const e=n.uri.toString(),t=m.checkIfNeedResetRecurringTasks(e);t&&(await h.resetAllRecurringTasks(n,t.lastVisit),await x(e,new Date))}function i(){t.extensionConfig.isDev&&w.setContext("todomd:isDev",!0)}m.onChangeActiveTextEditor(d.window.activeTextEditor),await b(),y.webviewProvider=new D.TasksWebviewViewProvider(t.state.extensionContext.extensionUri),t.state.extensionContext.subscriptions.push(d.default.window.registerWebviewViewProvider(D.TasksWebviewViewProvider.viewType,y.webviewProvider)),v.updateAllTreeViews(),f.updateArchivedTasks(),i(),y.changeActiveTextEditorDisposable=d.window.onDidChangeActiveTextEditor(m.onChangeActiveTextEditor),e.subscriptions.push(d.workspace.onDidChangeConfiguration((function(e){e.affectsConfiguration(t.EXTENSION_NAME)&&(t.extensionConfig=d.workspace.getConfiguration(t.EXTENSION_NAME),k(),p.updateDecorationStyle(),m.updateEverything(),i())})))},t.updateState=b,t.updateLastVisitGlobalState=x,t.deactivate=function(){k(),y.tagAutocompleteDisposable.dispose(),y.projectAutocompleteDisposable.dispose(),y.contextAutocompleteDisposable.dispose(),y.generalAutocompleteDisposable.dispose(),y.setDueDateAutocompleteDisposable.dispose(),y.changeTextDocumentDisposable.dispose(),y.hoverDisposable.dispose(),y.changeActiveTextEditorDisposable.dispose()}},1322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterItems=void 0,t.filterItems=function(e,t){if(0===t.length)return e;const o=function(e){const t=[],o=/(-)?"(.+?)"/,n=o.exec(e);n&&(t.push({filterType:1,value:n[2],isNegation:Boolean(n[1])}),e=e.replace(o,""));const i=e.split(" ");for(const e of i){if(!e.length)continue;const o={isNegation:!1,value:"",filterType:0};let n,i,r;switch("-"===e[0]?(n=!0,i=e.slice(2),r=e[1]):">"===e[0]||"<"===e[0]?(r=e[1],i=e.slice(2),o.filterMoreLess=">"===e[0]?1:2):(i=e.slice(1),r=e[0]),r){case"#":{const o=e.split("#").filter((e=>e.length));for(const e of o)t.push({filterType:2,value:e});continue}case"@":o.filterType=3;break;case"+":o.filterType=4;break;case"$":"done"===i?o.filterType=9:"due"===i?o.filterType=6:"overdue"===i?o.filterType=7:"recurring"===i?o.filterType=8:"noProject"===i?o.filterType=11:"noContext"===i?o.filterType=12:"noTag"===i?o.filterType=10:/^[A-Z]$/.test(i)&&(o.filterType=5);break;default:i=e,o.filterType=0}o.value=i,o.isNegation=n,t.push(o)}return t}(t);return e.filter((e=>{var t,n,i,r;const s=[];for(const a of o){let o;0===a.filterType?o=!!e.rawText.toLowerCase().includes(a.value.toLowerCase()):1===a.filterType?o=!!e.title.toLowerCase().includes(a.value.toLowerCase()):2===a.filterType?o=!!e.tags.includes(a.value):3===a.filterType?o=!!e.contexts.includes(a.value):4===a.filterType?o=!!e.projects.includes(a.value):5===a.filterType?o=a.filterMoreLess?1===a.filterMoreLess?a.value>=e.priority:a.value<=e.priority:e.priority===a.value:9===a.filterType?o=!!e.done:6===a.filterType?o=1===(null===(t=e.due)||void 0===t?void 0:t.isDue)||2===(null===(n=e.due)||void 0===n?void 0:n.isDue):7===a.filterType?o=2===(null===(i=e.due)||void 0===i?void 0:i.isDue):8===a.filterType?o=!0===(null===(r=e.due)||void 0===r?void 0:r.isRecurring):10===a.filterType?o=0===e.tags.length:11===a.filterType?o=0===e.projects.length:12===a.filterType&&(o=0===e.contexts.length),a.isNegation&&(o=!o),s.push(o)}return s.every((e=>!0===e))}))}},2014:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTaskHover=void 0;const n=o(7549);t.getTaskHover=function(e){var t,o,i;const r=new n.MarkdownString(void 0,!0);r.isTrusted=!0;const s="A"===e.priority?"#ec4f47":"B"===e.priority?"#fd9f9a":"C"===e.priority?"#ffb648":"D"===e.priority?"#f1d900":"E"===e.priority?"#97c500":"F"===e.priority?"#00cfad":void 0;s&&r.appendMarkdown(`<span style="background-color:${s};">&thinsp;</span>&nbsp;`),e.done&&r.appendMarkdown('<span style="color:#7cc54b;">$(pass)</span> ');let a="";e.count&&(a=` \`[${e.count.current}/${e.count.needed}]\``);let u="";if(e.due||e.overdue){let n="";1===(null===(t=e.due)||void 0===t?void 0:t.isDue)?n="#5faedb":2===(null===(o=e.due)||void 0===o?void 0:o.isDue)&&(n="#d44343"),u=` <span style="color:${n||"inherit"};">$(history)</span>&nbsp;`,0===(null===(i=e.due)||void 0===i?void 0:i.isDue)&&(u="")}r.appendMarkdown(`${e.title}${a}${u}\n\n`);for(const t of e.tags)r.appendMarkdown(`<span style="color:#fff;background-color:#029cdf;">&nbsp;#${t}&nbsp;</span>&nbsp;`);for(const t of e.projects)r.appendMarkdown(`<span style="color:#fff;background-color:#36cc9a;">&nbsp;+${t}&nbsp;</span>&nbsp;`);for(const t of e.contexts)r.appendMarkdown(`<span style="color:#fff;background-color:#7284eb;">&nbsp;@${t}&nbsp;</span>&nbsp;`);return r}},1244:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateHover=void 0;const i=n(o(7549)),r=o(112),s=o(2014),a=o(8720);t.updateHover=function(){r.Global.hoverDisposable&&r.Global.hoverDisposable.dispose(),r.Global.hoverDisposable=i.default.languages.registerHoverProvider({scheme:"file"},{provideHover(e,t,o){const n=a.findTaskAtLineExtension(t.line);if(n)return new i.default.Hover(s.getTaskHover(n))}})}},8306:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseDocument=t.parseLine=void 0;const s=r(o(7549)),a=o(1046),u=o(112),l=o(179);function c(e){let t=e.text.trim();if(!t.length)return{lineType:"empty"};const o=e.lineNumber;if(t.startsWith("# "))return{lineType:"comment"};if(t.startsWith("## ")){const e=[],o=t.slice(3).trim().split(" ");for(const t of o)t.startsWith("#")&&e.push(...t.split("#").filter((e=>e.length)));return{lineType:"specialComment",value:e}}const n=Math.floor(e.firstNonWhitespaceCharacterIndex/u.state.activeDocumentTabSize);let i=e.firstNonWhitespaceCharacterIndex,r=t.startsWith(u.extensionConfig.doneSymbol);r&&(t=t.replace(u.extensionConfig.doneSymbol,""),i+=u.extensionConfig.doneSymbol.length);const c=t.split(" "),d=e.text,f=[],p=[],h=[],m=[],g=[],T=[];let v,w;const D=[],y=[],b=[];let k,x,C,_,A,E,S,O,M,F;for(const e of c){switch(e[0]){case"{":{if("}"!==e[e.length-1]){T.push(e);break}const[t,n=""]=e.slice(1,-1).split(":"),u=new s.Range(o,i,o,i+e.length);if("due"===t)n.length&&(E=new a.DueDate(n),S=u);else if("overdue"===t)C=n,O=u;else if("cr"===t)g.push(u);else if("cm"===t)r=!0,F=u,g.push(u);else if("count"===t){if(void 0===n)break;const[e,t]=n.split("/"),o=parseInt(e,10),i=parseInt(t,10);if(!Number.isFinite(o)||!Number.isFinite(i))break;g.push(u),o===i&&(r=!0),k={range:u,current:o,needed:i}}else"t"===t?(x=n,g.push(u)):"h"===t?(_=!0,g.push(u)):"c"===t?(A=!0,M=u,g.push(u)):T.push(e);break}case"#":{const t=e.split("#").filter((e=>e.length));let n=i;for(const e of t)y.push(new s.Range(o,n,o,n+1)),b.push(new s.Range(o,n+1,o,n+1+e.length)),n+=e.length+1,D.push(e);break}case"@":1!==e.length?(f.push(e.slice(1)),p.push(new s.Range(o,i,o,i+e.length))):T.push(e);break;case"+":1!==e.length?(h.push(e.slice(1)),m.push(new s.Range(o,i,o,i+e.length))):T.push(e);break;case"(":/^\([A-Z]\)$/.test(e)?(v=e[1],w=new s.Range(o,i,o,i+e.length)):T.push(e);break;default:T.push(e)}i+=e.length+1}return{lineType:"task",value:new l.TheTask({tags:D,rawText:d,tagsDelimiterRanges:y,tagsRange:b,projects:h,projectRanges:m,done:r,priority:v,priorityRange:w,specialTagRanges:g,due:E,dueRange:S,overdueRange:O,collapseRange:M,completionDateRange:F,count:k,threshold:x,overdue:C,isHidden:_,isCollapsed:A,contexts:f,contextRanges:p,title:T.join(" "),lineNumber:o,indentLvl:n})}}t.parseLine=c,t.parseDocument=async function(e){var t,o;const n=[],i=[];let r=[];const u=null!==(t=await s.default.commands.executeCommand("vscode.executeLinkProvider",e.uri))&&void 0!==t?t:[];for(let t=0;t<e.lineCount;t++){const l=c(e.lineAt(t));switch(l.lineType){case"empty":continue;case"comment":i.push(new s.Range(t,0,t,0)),r=[];continue;case"specialComment":i.push(new s.Range(t,0,t,0)),r=l.value;continue;default:{0!==r.length&&l.value.tags.push(...r);const e=u.filter((e=>e.range.start.line===t&&void 0!==e.target));if(0!==e.length&&(l.value.links=e.map((e=>({characterRange:[e.range.start.character,e.range.end.character],value:e.target.toString(!0),scheme:e.target.scheme})))),l.value.overdue&&(null===(o=l.value.due)||void 0===o?void 0:o.raw)&&(l.value.due=new a.DueDate(l.value.due.raw,{overdue:l.value.overdue})),l.value.indentLvl)for(let e=n.length-1;e>=0;e--)if(n[e].indentLvl<l.value.indentLvl){l.value.parentTaskLineNumber=n[e].lineNumber;break}n.push(l.value)}}}const d=Object.create(null);for(const e of n)d[e.lineNumber]=new l.TheTask({...e,subtasks:[]});const f=[];for(const e of n)void 0!==e.parentTaskLineNumber?d[e.parentTaskLineNumber].subtasks.push(d[e.lineNumber]):f.push(d[e.lineNumber]);return{tasksAsTree:f,tasks:n,commentLines:i}}},4158:(e,t)=>{"use strict";function o(e,t,o=0){const n=e.slice();let i=[];return 0===t&&(i=n.sort(((e,t)=>e.priority===t.priority?0:e.priority>t.priority?1:-1))),1===o?i.reverse():i}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSortTasks=t.sortTasks=void 0,t.sortTasks=o,t.defaultSortTasks=function(e){const t=e.filter((e=>{var t;return 2===(null===(t=e.due)||void 0===t?void 0:t.isDue)})),n=e.filter((e=>{var t;return 1===(null===(t=e.due)||void 0===t?void 0:t.isDue)})),i=e.filter((e=>{var t;return!(null===(t=e.due)||void 0===t?void 0:t.isDue)||!e.due}));return[...o(t,0),...o(n,0),...o(i,0)]}},6158:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBar=void 0;const n=o(7549),i=o(112),r=o(974);t.StatusBar=class{constructor(){this.statusBarItem=n.window.createStatusBarItem(1,-2e4)}show(){i.extensionConfig.statusBarCounterEnabled&&this.statusBarItem.show()}hide(){this.statusBarItem.hide()}updateText(e){const t=e.filter((e=>e.done)),o=r.percentage(t.length,e.length).toFixed(1);this.statusBarItem.text=`${t.length}/${e.length} (${o}%)`}}},8720:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findTaskAtLineExtension=void 0;const n=o(112);function i(e,t){for(const o of t){if(o.lineNumber===e)return o;if(o.subtasks.length){const t=i(e,o.subtasks);if(t)return t}}}t.findTaskAtLineExtension=function(e){return i(e,n.state.tasksAsTree)}},4738:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.helpCreateDueDate=void 0;const i=n(o(7484)),r=o(667);t.helpCreateDueDate=function(e,t=new Date){var o,n,s;"+"===e?e="+1":"-"===e&&(e="-1");const a=/^(\d+)$/.exec(e),u=/^(\+|-)(\d+)(d|w|m)?$/.exec(e),l=r.dayOfTheWeekRegexp.exec(e),c=/e(\d+)(d)/.exec(e),d=/^(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s?(\d\d?)$/i.exec(e),f=i.default(t);if(u){const e=u[1],t=Number(u[2]),n=null!==(o=u[3])&&void 0!==o?o:"d",i="d"===n?"day":"w"===n?"week":"m"===n?"month":"unknown";if("unknown"===i)return;let s;return s="+"===e?f.add(t,i):f.subtract(t,i),s.format(r.DATE_FORMAT)}if(d){const e=d[1],t=Number(d[2]);let o=f.set("month",r.monthStringToMonthIndex(e));return o=o.set("date",t),o.isBefore(f,"date")&&(o=o.add(1,"year")),o.format(r.DATE_FORMAT)}if(a){const e=f.date(),t=Number(a[1]);return(t>=e?f.set("date",t):f.add(1,"month").set("date",t)).format(r.DATE_FORMAT)}if(l){const t=r.dayOfWeekToIndexOfWeek(e);let o=f.set("day",t);return o.isBefore(f,"day")&&(o=o.add(7,"day")),o.format(r.DATE_FORMAT)}if(c){const e=null!==(n=Number(c[1]))&&void 0!==n?n:1,t=null!==(s=c[2])&&void 0!==s?s:"d";return`${i.default().format(r.DATE_FORMAT)}|e${e}${t}`}}},667:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=t.dateAndDateDiff=t.dateDiff=t.dayOfTheWeek=t.monthStringToMonthIndex=t.dayOfWeekToIndexOfWeek=t.getDateInISOFormat=t.monthRegexp=t.dayOfTheWeekRegexp=t.DATE_TIME_FORMAT=t.TIME_FORMAT=t.DATE_FORMAT=t.ONE_WEEK_IN_MS=t.ONE_DAY_IN_MS=t.ONE_HOUR_IN_MS=t.ONE_MINUTE_IN_MS=void 0;const i=n(o(7484));function r(e){return e.format("ddd")}function s(e){let t;return t=i.default().isSame(e,"date")?"today":i.default().add(1,"day").isSame(e,"date")?"tomorrow":i.default().to(e),t}t.ONE_MINUTE_IN_MS=6e4,t.ONE_HOUR_IN_MS=36e5,t.ONE_DAY_IN_MS=864e5,t.ONE_WEEK_IN_MS=6048e5,t.DATE_FORMAT="YYYY-MM-DD",t.TIME_FORMAT="HH:mm:ss",t.DATE_TIME_FORMAT=`${t.DATE_FORMAT}T${t.TIME_FORMAT}`,t.dayOfTheWeekRegexp=/^(sun|sunday|mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday)$/i,t.monthRegexp=/^(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)$/i,t.getDateInISOFormat=function(e=new Date,o=!1){const n=o?t.DATE_TIME_FORMAT:t.DATE_FORMAT;return i.default(e).format(n)},t.dayOfWeekToIndexOfWeek=function(e){if(/^(sun|sunday)$/i.test(e))return 0;if(/^(mon|monday)$/i.test(e))return 1;if(/^(tue|tuesday)$/i.test(e))return 2;if(/^(wed|wednesday)$/i.test(e))return 3;if(/^(thu|thursday)$/i.test(e))return 4;if(/^(fri|friday)$/i.test(e))return 5;if(/^(sat|saturday)$/i.test(e))return 6;throw Error(`Unknown day of the week. [${e}]`)},t.monthStringToMonthIndex=function(e){if(/^(Jan|January)$/i.test(e))return 0;if(/^(Feb|February)$/i.test(e))return 1;if(/^(Mar|March)$/i.test(e))return 2;if(/^(Apr|April)$/i.test(e))return 3;if(/^May$/i.test(e))return 4;if(/^(Jun|June)$/i.test(e))return 5;if(/^(Jul|July)$/i.test(e))return 6;if(/^(Aug|August)$/i.test(e))return 7;if(/^(Sep|September)$/i.test(e))return 8;if(/^(Oct|October)$/i.test(e))return 9;if(/^(Nov|November)$/i.test(e))return 10;if(/^(Dec|December)$/i.test(e))return 11;throw Error(`Unknown month. [${e}]`)},t.dayOfTheWeek=r,t.dateDiff=s,t.dateAndDateDiff=function(e){return`${e.format(t.DATE_FORMAT)} ${r(e)} [${s(e)}]`},t.isValidDate=function(e,t,o){const n=new Date(e,t,o);return e===n.getFullYear()&&t===n.getMonth()&&o===n.getDate()}},1409:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextProvider=t.ContextTreeItem=void 0;const i=n(o(7549)),r=o(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="project"}}t.ContextTreeItem=s,t.ContextProvider=class{constructor(e){this.contexts=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.contexts=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.contexts.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},2286:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectProvider=t.ProjectTreeItem=void 0;const i=n(o(7549)),r=o(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="project"}}t.ProjectTreeItem=s,t.ProjectProvider=class{constructor(e){this.projects=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.projects=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.projects.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},1242:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TagProvider=t.TagTreeItem=void 0;const i=n(o(7549)),r=o(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="tag"}}t.TagTreeItem=s,t.TagProvider=class{constructor(e){this.tags=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.tags=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.tags.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},2612:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.tasksToTreeItems=t.TaskProvider=t.TaskTreeItem=void 0;const a=s(o(7484)),u=r(o(7549)),l=o(112),c=o(2014),d=o(179);class f extends u.default.TreeItem{constructor(e,t,o){super(e),this.label=e,this.task=t,this.command=o,this.collapsibleState=u.default.TreeItemCollapsibleState.None,this.contextValue="task",t.links.length&&(this.contextValue="link"),t.subtasks.length&&(this.collapsibleState=u.default.TreeItemCollapsibleState.Expanded),t.isCollapsed&&(this.collapsibleState=u.default.TreeItemCollapsibleState.Collapsed),t.done&&(this.iconPath=new u.ThemeIcon("pass",new u.ThemeColor("todomd.treeViewCompletedTaskIcon")))}get tooltip(){return c.getTaskHover(this.task)}}function p(e){const t=[];for(const o of e)o.isHidden||o.threshold&&a.default().isAfter(new Date(o.threshold),"date")||t.push(new f(d.TheTask.formatTask(o),o,{command:`${l.EXTENSION_NAME}.goToLine`,title:"Go To Line",arguments:[o.lineNumber]}));return t}t.TaskTreeItem=f,t.TaskProvider=class{constructor(e){this.tasks=e,this._onDidChangeTreeData=new u.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.tasks=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(e){const t=e.task.subtasks;return t.length?p(t):[]}return p(this.tasks)}},t.tasksToTreeItems=p},855:function(e,t,o){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.groupAndSortTreeItems=t.updateArchivedTasksTreeView=t.updateTasksTreeView=t.updateAllTreeViews=t.createAllTreeViews=t.tasksView=t.archivedProvider=t.taskProvider=t.contextProvider=t.projectProvider=t.tagProvider=void 0;const i=n(o(7549)),r=o(4295),s=o(112),a=o(1322),u=o(1409),l=o(2286),c=o(1242),d=o(2612),f=o(9699),p=o(4523),h=o(4641);t.tagProvider=new c.TagProvider([]),t.projectProvider=new l.ProjectProvider([]),t.contextProvider=new u.ContextProvider([]),t.taskProvider=new d.TaskProvider([]),t.archivedProvider=new d.TaskProvider([]);const m=new d.TaskProvider([]),g=new d.TaskProvider([]),T=new d.TaskProvider([]);let v,w,D,y,b,k,x;function C(){let e;e=s.state.taskTreeViewFilterValue?a.filterItems(s.state.tasksAsTree,s.state.taskTreeViewFilterValue):s.state.tasksAsTree,t.taskProvider.refresh(e),_(t.tasksView,"tasks",e.length)}function _(e,t,o,n=""){e.title=`${t} (${o}) ${n}`}t.createAllTreeViews=function(){if(v=i.default.window.createTreeView(`${s.EXTENSION_NAME}.tags`,{treeDataProvider:t.tagProvider,showCollapseAll:!0}),w=i.default.window.createTreeView(`${s.EXTENSION_NAME}.projects`,{treeDataProvider:t.projectProvider,showCollapseAll:!0}),D=i.default.window.createTreeView(`${s.EXTENSION_NAME}.contexts`,{treeDataProvider:t.contextProvider,showCollapseAll:!0}),t.tasksView=i.default.window.createTreeView(`${s.EXTENSION_NAME}.tasks`,{treeDataProvider:t.taskProvider,showCollapseAll:!0}),t.tasksView.onDidCollapseElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),t.tasksView.onDidExpandElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),y=i.default.window.createTreeView(`${s.EXTENSION_NAME}.archived`,{treeDataProvider:t.archivedProvider}),s.extensionConfig.treeViews.length){const e=s.extensionConfig.treeViews[0];e&&("string"!=typeof e.filter||"string"!=typeof e.title?i.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(b=i.default.window.createTreeView("todomd.generic1",{treeDataProvider:m,showCollapseAll:!0}),b.onDidCollapseElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),b.onDidExpandElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),p.setContext("todomd:generic1FilterExists",!0)));const t=s.extensionConfig.treeViews[1];t&&("string"!=typeof t.filter||"string"!=typeof t.title?i.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(k=i.default.window.createTreeView("todomd.generic2",{treeDataProvider:g,showCollapseAll:!0}),k.onDidCollapseElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),k.onDidExpandElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),p.setContext("todomd:generic2FilterExists",!0)));const o=s.extensionConfig.treeViews[2];o&&("string"!=typeof o.filter||"string"!=typeof o.title?i.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(x=i.default.window.createTreeView("todomd.generic3",{treeDataProvider:T,showCollapseAll:!0}),x.onDidCollapseElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),x.onDidExpandElement((async e=>{r.toggleTaskCollapse(await r.getActiveDocument(),e.element.task.lineNumber)})),p.setContext("todomd:generic3FilterExists",!0)))}else p.setContext("todomd:generic1FilterExists",!1),p.setContext("todomd:generic2FilterExists",!1),p.setContext("todomd:generic3FilterExists",!1)},t.updateAllTreeViews=function(){if(t.tagProvider.refresh(s.state.tagsForTreeView),_(v,"tags",s.state.tagsForTreeView.length),C(),t.projectProvider.refresh(s.state.projectsForTreeView),_(w,"projects",s.state.projectsForTreeView.length),t.contextProvider.refresh(s.state.contextsForTreeView),_(D,"contexts",s.state.contextsForTreeView.length),b){const e=a.filterItems(s.state.tasksAsTree,s.extensionConfig.treeViews[0].filter);m.refresh(e),_(b,s.extensionConfig.treeViews[0].title,e.length)}if(k){const e=a.filterItems(s.state.tasksAsTree,s.extensionConfig.treeViews[1].filter);g.refresh(e),_(k,s.extensionConfig.treeViews[1].title,e.length)}if(x){const e=a.filterItems(s.state.tasksAsTree,s.extensionConfig.treeViews[2].filter);T.refresh(e),_(x,s.extensionConfig.treeViews[2].title,e.length)}h.updateWebviewView()},t.updateTasksTreeView=C,t.updateArchivedTasksTreeView=function(){const e=s.state.archivedTasks;t.archivedProvider.refresh(e),_(y,"archived",e.length)},t.groupAndSortTreeItems=function(e){const t={},o={},n={};for(const i of e){for(const e of i.tags)t[e]||(t[e]=[]),t[e].push(i);if(i.projects.length)for(const e of i.projects)o[e]||(o[e]=[]),o[e].push(i);if(i.contexts.length)for(const e of i.contexts)n[e]||(n[e]=[]),n[e].push(i)}const i=[];for(const e in t)i.push({title:e,tasks:t[e]});let r;r=s.extensionConfig.sortTagsView===f.SortTags.alphabetic?i.sort(((e,t)=>e.title.localeCompare(t.title))):i.sort(((e,t)=>t.tasks.length-e.tasks.length));const a=[];for(const e in o)a.push({title:e,tasks:o[e]});const u=[];for(const e in n)u.push({title:e,tasks:n[e]});return{contextsForProvider:u,projectsForProvider:a,sortedTagsForProvider:r,tags:Object.keys(t),projects:Object.keys(o),contexts:Object.keys(n)}}},9699:(e,t)=>{"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.SortTags=void 0,(o=t.SortTags||(t.SortTags={})).alphabetic="alphabetic",o.frequency="frequency"},4291:(e,t,o)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEachTask=void 0;const n=o(112);t.forEachTask=function e(t,o=n.state.tasksAsTree){for(const n of o)t(n),n.subtasks.length&&e(t,n.subtasks)}},974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenDeep=t.fancyNumber=t.percentage=void 0,t.percentage=function(e,t){return e/t*100},t.fancyNumber=function(e){const t=["0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣"];return String(e).split("").map((e=>t[Number(e)])).join("")},t.flattenDeep=function(e){const t=[];return function e(o){for(const n of o)t.push(n),n.subtasks.length&&e(n.subtasks)}(e),t}},4523:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getWordAtPosition=t.getWordRangeAtPosition=t.inputOffset=t.openSettingGuiAt=t.followLink=t.followLinks=t.setContext=t.getFullRangeFromLines=t.openFileInEditor=t.openInUntitled=void 0;const s=r(o(7549));async function a(e){return await s.default.env.openExternal(s.Uri.parse(e))}function u(e,t){return e.getWordRangeAtPosition(t,/\S+/)}t.openInUntitled=async function(e,t){const o=await s.default.workspace.openTextDocument({language:t,content:e});s.default.window.showTextDocument(o)},t.openFileInEditor=async function(e){const t=await s.default.workspace.openTextDocument(e);s.default.window.showTextDocument(t)},t.getFullRangeFromLines=function(e,t,o){const n=e.lineAt(o);return new s.default.Range(t,0,o,n.range.end.character)},t.setContext=async function(e,t){return await s.default.commands.executeCommand("setContext",e,t)},t.followLinks=async function(e){let t=e[0].value;e.length>1&&(t=await s.default.window.showQuickPick(e.map((e=>e.value))),!t)||a(t)},t.followLink=a,t.openSettingGuiAt=function(e){s.default.commands.executeCommand("workbench.action.openSettings",e)},t.inputOffset=function(e){return`${e}${" ".repeat(8)}`},t.getWordRangeAtPosition=u,t.getWordAtPosition=function(e,t){const o=u(e,t);if(o)return e.getText(o)}},723:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=void 0,t.getNonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let o=0;o<32;o++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},4641:function(e,t,o){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebviewView=t.TasksWebviewViewProvider=void 0;const s=r(o(7549)),a=o(4295),u=o(112),l=o(8720),c=o(4523),d=o(723);class f{constructor(e){this._extensionUri=e}resolveWebviewView(e,t,o){this._view=e,e.webview.options={enableScripts:!0,enableCommandUris:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.updateEverything(),this.updateTitle(u.state.tasksAsTree.length),e.webview.onDidReceiveMessage((async e=>{switch(e.type){case"toggleDone":await a.toggleDoneAtLine(await a.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"showNotification":s.window.showInformationMessage(e.value);break;case"goToTask":a.goToTask(e.value);break;case"toggleTaskCollapse":await a.toggleTaskCollapse(await a.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"incrementCount":await a.incrementCountForTask(await a.getActiveDocument(),e.value,l.findTaskAtLineExtension(e.value)),await u.updateState(),this.updateEverything();break;case"decrementCount":await a.decrementCountForTask(await a.getActiveDocument(),e.value,l.findTaskAtLineExtension(e.value)),await u.updateState(),this.updateEverything();break;case"deleteTask":await a.tryToDeleteTask(await a.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"updateTitle":this.updateTitle(e.value);break;case"followLink":c.followLink(e.value)}})),e.onDidChangeVisibility((t=>{!0===e.visible&&this.updateEverything()}))}updateEverything(){this._view&&!0===this._view.visible&&this._view.webview.postMessage({type:"updateEverything",value:{tasks:u.state.tasksAsTree,tags:u.state.tags,projects:u.state.projects,contexts:u.state.contexts,defaultFileSpecified:Boolean(u.extensionConfig.defaultFile),activeDocumentOpened:Boolean(u.state.activeDocument),config:u.extensionConfig.webview}})}updateTitle(e){this._view&&(this._view.title=`webview (${e})`)}_getHtmlForWebview(e){const t=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","webview.js")),o=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","webview.css")),n=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","vendor","codicon.css")),i=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","vendor","codicon.ttf")),r=d.getNonce();return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${i}; style-src 'unsafe-inline' ${e.cspSource} ${n}; script-src 'nonce-${r}';">\n\t\t\t\t<link href="${n}" rel="stylesheet" />\n\t\t\t\t<link href="${o}" rel="stylesheet">\n\t\t\t\t<title>Tasks</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<div id="app"></div>\n\t\t\t\t<script defer nonce="${r}" src="${t}"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}t.TasksWebviewViewProvider=f,f.viewType="todomd.webviewTasks",t.updateWebviewView=function(){u.Global.webviewProvider&&u.Global.webviewProvider.updateEverything()}},5747:e=>{"use strict";e.exports=require("fs")},7549:e=>{"use strict";e.exports=require("vscode")}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}return o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o(112)})();
//# sourceMappingURL=extension.js.map