module.exports=(()=>{var e={7484:function(e){e.exports=function(){"use strict";var e="millisecond",t="second",n="minute",o="hour",i="day",r="week",s="month",a="quarter",u="year",l="date",c=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,n){var o=String(e);return!o||o.length>=t?e:""+Array(t+1-o.length).join(n)+e},h={s:p,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),o=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+p(o,2,"0")+":"+p(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var o=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(o,s),r=n-i<0,a=t.clone().add(o+(r?-1:1),s);return+(-(o+(n-i)/(r?i-a:a-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(c){return{M:s,y:u,w:r,d:i,D:l,h:o,m:n,s:t,ms:e,Q:a}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",g={};g[m]=f;var v=function(e){return e instanceof y},T=function(e,t,n){var o;if(!e)return m;if("string"==typeof e)g[e]&&(o=e),t&&(g[e]=t,o=e);else{var i=e.name;g[i]=e,o=i}return!n&&o&&(m=o),o||!n&&m},w=function(e,t){if(v(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new y(n)},D=h;D.l=T,D.i=v,D.w=function(e,t){return w(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var y=function(){function f(e){this.$L=T(e.locale,null,!0),this.parse(e)}var p=f.prototype;return p.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(D.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var o=t.match(c);if(o){var i=o[2]-1||0,r=(o[7]||"0").substring(0,3);return n?new Date(Date.UTC(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,r)):new Date(o[1],i,o[3]||1,o[4]||0,o[5]||0,o[6]||0,r)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},p.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},p.$utils=function(){return D},p.isValid=function(){return!("Invalid Date"===this.$d.toString())},p.isSame=function(e,t){var n=w(e);return this.startOf(t)<=n&&n<=this.endOf(t)},p.isAfter=function(e,t){return w(e)<this.startOf(t)},p.isBefore=function(e,t){return this.endOf(t)<w(e)},p.$g=function(e,t,n){return D.u(e)?this[t]:this.set(n,e)},p.unix=function(){return Math.floor(this.valueOf()/1e3)},p.valueOf=function(){return this.$d.getTime()},p.startOf=function(e,a){var c=this,d=!!D.u(a)||a,f=D.p(e),p=function(e,t){var n=D.w(c.$u?Date.UTC(c.$y,t,e):new Date(c.$y,t,e),c);return d?n:n.endOf(i)},h=function(e,t){return D.w(c.toDate()[e].apply(c.toDate("s"),(d?[0,0,0,0]:[23,59,59,999]).slice(t)),c)},m=this.$W,g=this.$M,v=this.$D,T="set"+(this.$u?"UTC":"");switch(f){case u:return d?p(1,0):p(31,11);case s:return d?p(1,g):p(0,g+1);case r:var w=this.$locale().weekStart||0,y=(m<w?m+7:m)-w;return p(d?v-y:v+(6-y),g);case i:case l:return h(T+"Hours",0);case o:return h(T+"Minutes",1);case n:return h(T+"Seconds",2);case t:return h(T+"Milliseconds",3);default:return this.clone()}},p.endOf=function(e){return this.startOf(e,!1)},p.$set=function(r,a){var c,d=D.p(r),f="set"+(this.$u?"UTC":""),p=(c={},c[i]=f+"Date",c[l]=f+"Date",c[s]=f+"Month",c[u]=f+"FullYear",c[o]=f+"Hours",c[n]=f+"Minutes",c[t]=f+"Seconds",c[e]=f+"Milliseconds",c)[d],h=d===i?this.$D+(a-this.$W):a;if(d===s||d===u){var m=this.clone().set(l,1);m.$d[p](h),m.init(),this.$d=m.set(l,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},p.set=function(e,t){return this.clone().$set(e,t)},p.get=function(e){return this[D.p(e)]()},p.add=function(e,a){var l,c=this;e=Number(e);var d=D.p(a),f=function(t){var n=w(c);return D.w(n.date(n.date()+Math.round(t*e)),c)};if(d===s)return this.set(s,this.$M+e);if(d===u)return this.set(u,this.$y+e);if(d===i)return f(1);if(d===r)return f(7);var p=(l={},l[n]=6e4,l[o]=36e5,l[t]=1e3,l)[d]||1,h=this.$d.getTime()+e*p;return D.w(h,this)},p.subtract=function(e,t){return this.add(-1*e,t)},p.format=function(e){var t=this;if(!this.isValid())return"Invalid Date";var n=e||"YYYY-MM-DDTHH:mm:ssZ",o=D.z(this),i=this.$locale(),r=this.$H,s=this.$m,a=this.$M,u=i.weekdays,l=i.months,c=function(e,o,i,r){return e&&(e[o]||e(t,n))||i[o].substr(0,r)},f=function(e){return D.s(r%12||12,e,"0")},p=i.meridiem||function(e,t,n){var o=e<12?"AM":"PM";return n?o.toLowerCase():o},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:D.s(a+1,2,"0"),MMM:c(i.monthsShort,a,l,3),MMMM:c(l,a),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,u,2),ddd:c(i.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(r),HH:D.s(r,2,"0"),h:f(1),hh:f(2),a:p(r,s,!0),A:p(r,s,!1),m:String(s),mm:D.s(s,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:o};return n.replace(d,(function(e,t){return t||h[e]||o.replace(":","")}))},p.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},p.diff=function(e,l,c){var d,f=D.p(l),p=w(e),h=6e4*(p.utcOffset()-this.utcOffset()),m=this-p,g=D.m(this,p);return g=(d={},d[u]=g/12,d[s]=g,d[a]=g/3,d[r]=(m-h)/6048e5,d[i]=(m-h)/864e5,d[o]=m/36e5,d[n]=m/6e4,d[t]=m/1e3,d)[f]||m,c?g:D.a(g)},p.daysInMonth=function(){return this.endOf(s).$D},p.$locale=function(){return g[this.$L]},p.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),o=T(e,t,!0);return o&&(n.$L=o),n},p.clone=function(){return D.w(this.$d,this)},p.toDate=function(){return new Date(this.valueOf())},p.toJSON=function(){return this.isValid()?this.toISOString():null},p.toISOString=function(){return this.$d.toISOString()},p.toString=function(){return this.$d.toUTCString()},f}(),b=y.prototype;return w.prototype=b,[["$ms",e],["$s",t],["$m",n],["$H",o],["$W",i],["$M",s],["$y",u],["$D",l]].forEach((function(e){b[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),w.extend=function(e,t){return e.$i||(e(t,y,w),e.$i=!0),w},w.locale=T,w.isDayjs=v,w.unix=function(e){return w(1e3*e)},w.en=g[m],w.Ls=g,w.p={},w}()},6607:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,o,i){var r=n(e),s=n(t),a="("===(i=i||"()")[0],u=")"===i[1];return(a?this.isAfter(r,o):!this.isBefore(r,o))&&(u?this.isBefore(s,o):!this.isAfter(s,o))||(a?this.isBefore(r,o):!this.isAfter(r,o))&&(u?this.isAfter(s,o):!this.isBefore(s,o))}}}()},9542:function(e){e.exports=function(){"use strict";var e="day";return function(t,n,o){var i=function(t){return t.add(4-t.isoWeekday(),e)},r=n.prototype;r.isoWeekYear=function(){return i(this).year()},r.isoWeek=function(t){if(!this.$utils().u(t))return this.add(7*(t-this.isoWeek()),e);var n,r,s,a=i(this),u=(n=this.isoWeekYear(),s=4-(r=(this.$u?o.utc:o)().year(n).startOf("year")).isoWeekday(),r.isoWeekday()>4&&(s+=7),r.add(s,e));return a.diff(u,"week")+1},r.isoWeekday=function(e){return this.$utils().u(e)?this.day()||7:this.day(this.day()%7?e:e-7)};var s=r.startOf;r.startOf=function(e,t){var n=this.$utils(),o=!!n.u(t)||t;return"isoweek"===n.p(e)?o?this.date(this.date()-(this.isoWeekday()-1)).startOf("day"):this.date(this.date()-1-(this.isoWeekday()-1)+7).endOf("day"):s.bind(this)(e,t)}}}()},4110:function(e){e.exports=function(){"use strict";return function(e,t,n){e=e||{};var o=t.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(e,t,n,i){return o.fromToBase(e,t,n,i)}n.en.relativeTime=i,o.fromToBase=function(t,o,r,s,a){for(var u,l,c,d=r.$locale().relativeTime||i,f=e.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=f.length,h=0;h<p;h+=1){var m=f[h];m.d&&(u=s?n(t).diff(r,m.d,!0):r.diff(t,m.d,!0));var g=(e.rounding||Math.round)(Math.abs(u));if(c=u>0,g<=m.r||!m.r){g<=1&&h>0&&(m=f[h-1]);var v=d[m.l];a&&(g=a(""+g)),l="string"==typeof v?v.replace("%d",g):v(g,o,m.l,c);break}}if(o)return l;var T=c?d.future:d.past;return"function"==typeof T?T(l):T.replace("%s",l)},o.to=function(e,t){return r(e,t,this,!0)},o.from=function(e,t){return r(e,t,this)};var s=function(e){return e.$u?n.utc():n()};o.toNow=function(e){return this.to(s(this),e)},o.fromNow=function(e){return this.from(s(this),e)}}}()},2705:(e,t,n)=>{var o=n(5639).Symbol;e.exports=o},4636:(e,t,n)=>{var o=n(2545),i=n(5694),r=n(1469),s=n(4144),a=n(5776),u=n(6719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=r(e),c=!n&&i(e),d=!n&&!c&&s(e),f=!n&&!c&&!d&&u(e),p=n||c||d||f,h=p?o(e.length,String):[],m=h.length;for(var g in e)!t&&!l.call(e,g)||p&&("length"==g||d&&("offset"==g||"parent"==g)||f&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||a(g,m))||h.push(g);return h}},9932:e=>{e.exports=function(e,t){for(var n=-1,o=null==e?0:e.length,i=Array(o);++n<o;)i[n]=t(e[n],n,e);return i}},4311:(e,t,n)=>{var o=n(9877);e.exports=function(e){var t=e.length;return t?e[o(0,t-1)]:void 0}},4239:(e,t,n)=>{var o=n(2705),i=n(9607),r=n(2333),s=o?o.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":s&&s in Object(e)?i(e):r(e)}},9454:(e,t,n)=>{var o=n(4239),i=n(7005);e.exports=function(e){return i(e)&&"[object Arguments]"==o(e)}},8749:(e,t,n)=>{var o=n(4239),i=n(1780),r=n(7005),s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1,e.exports=function(e){return r(e)&&i(e.length)&&!!s[o(e)]}},280:(e,t,n)=>{var o=n(5726),i=n(6916),r=Object.prototype.hasOwnProperty;e.exports=function(e){if(!o(e))return i(e);var t=[];for(var n in Object(e))r.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9877:e=>{var t=Math.floor,n=Math.random;e.exports=function(e,o){return e+t(n()*(o-e+1))}},4992:(e,t,n)=>{var o=n(4311),i=n(2628);e.exports=function(e){return o(i(e))}},2545:e=>{e.exports=function(e,t){for(var n=-1,o=Array(e);++n<e;)o[n]=t(n);return o}},7518:e=>{e.exports=function(e){return function(t){return e(t)}}},7415:(e,t,n)=>{var o=n(9932);e.exports=function(e,t){return o(t,(function(t){return e[t]}))}},1957:e=>{var t="object"==typeof global&&global&&global.Object===Object&&global;e.exports=t},9607:(e,t,n)=>{var o=n(2705),i=Object.prototype,r=i.hasOwnProperty,s=i.toString,a=o?o.toStringTag:void 0;e.exports=function(e){var t=r.call(e,a),n=e[a];try{e[a]=void 0;var o=!0}catch(e){}var i=s.call(e);return o&&(t?e[a]=n:delete e[a]),i}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var o=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==o||"symbol"!=o&&t.test(e))&&e>-1&&e%1==0&&e<n}},5726:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},6916:(e,t,n)=>{var o=n(5569)(Object.keys,Object);e.exports=o},1167:(e,t,n)=>{e=n.nmd(e);var o=n(1957),i=t&&!t.nodeType&&t,r=i&&e&&!e.nodeType&&e,s=r&&r.exports===i&&o.process,a=function(){try{return r&&r.require&&r.require("util").types||s&&s.binding&&s.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5639:(e,t,n)=>{var o=n(1957),i="object"==typeof self&&self&&self.Object===Object&&self,r=o||i||Function("return this")();e.exports=r},5694:(e,t,n)=>{var o=n(9454),i=n(7005),r=Object.prototype,s=r.hasOwnProperty,a=r.propertyIsEnumerable,u=o(function(){return arguments}())?o:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=u},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,n)=>{var o=n(3560),i=n(1780);e.exports=function(e){return null!=e&&i(e.length)&&!o(e)}},4144:(e,t,n)=>{e=n.nmd(e);var o=n(5639),i=n(5062),r=t&&!t.nodeType&&t,s=r&&e&&!e.nodeType&&e,a=s&&s.exports===r?o.Buffer:void 0,u=(a?a.isBuffer:void 0)||i;e.exports=u},3560:(e,t,n)=>{var o=n(4239),i=n(3218);e.exports=function(e){if(!i(e))return!1;var t=o(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6719:(e,t,n)=>{var o=n(8749),i=n(7518),r=n(1167),s=r&&r.isTypedArray,a=s?i(s):o;e.exports=a},3674:(e,t,n)=>{var o=n(4636),i=n(280),r=n(8612);e.exports=function(e){return r(e)?o(e):i(e)}},5534:(e,t,n)=>{var o=n(4311),i=n(4992),r=n(1469);e.exports=function(e){return(r(e)?o:i)(e)}},5062:e=>{e.exports=function(){return!1}},2628:(e,t,n)=>{var o=n(7415),i=n(3674);e.exports=function(e){return null==e?[]:o(e,i(e))}},179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TheTask=void 0,t.TheTask=class{constructor(e){var t,n,o,i,r,s,a,u,l,c;this.title=e.title,this.lineNumber=e.lineNumber,this.indentLvl=e.indentLvl,this.subtasks=null!==(t=e.subtasks)&&void 0!==t?t:[],this.rawText=e.rawText,this.done=null!==(n=e.done)&&void 0!==n&&n,this.tags=null!==(o=e.tags)&&void 0!==o?o:[],this.projects=null!==(i=e.projects)&&void 0!==i?i:[],this.priority=null!==(r=e.priority)&&void 0!==r?r:"G",this.links=null!==(s=e.links)&&void 0!==s?s:[],this.due=e.due,this.dueRange=e.dueRange,this.count=e.count,this.threshold=e.threshold,this.isHidden=e.isHidden,this.isCollapsed=e.isCollapsed,this.overdue=e.overdue,this.parentTaskLineNumber=e.parentTaskLineNumber,this.contexts=null!==(a=e.contexts)&&void 0!==a?a:[],this.specialTagRanges=null!==(u=e.specialTagRanges)&&void 0!==u?u:[],this.contextRanges=null!==(l=e.contextRanges)&&void 0!==l?l:[],this.projectRanges=null!==(c=e.projectRanges)&&void 0!==c?c:[],this.priorityRange=e.priorityRange,this.tagsDelimiterRanges=e.tagsDelimiterRanges,this.tagsRange=e.tagsRange,this.overdueRange=e.overdueRange,this.collapseRange=e.collapseRange,this.completionDateRange=e.completionDateRange}getNestedTasksLineNumbers(e=this.subtasks){const t=[];for(const n of e)t.push(n.lineNumber),n.subtasks&&t.push(...this.getNestedTasksLineNumbers(n.subtasks));return t}isRoot(){return void 0!==this.parentTaskLineNumber}hasNestedTasks(){return 0!==this.subtasks.length}static formatTask(e,t=!1){var n,o,i;let r="";return t||(1===(null===(n=e.due)||void 0===n?void 0:n.isDue)?r+="🟩 ":2===(null===(o=e.due)||void 0===o?void 0:o.isDue)?r+="🟥 ":3===(null===(i=e.due)||void 0===i?void 0:i.isDue)&&(r+="🟪 ")),r+=e.title,e.count&&(r+=` ${e.count.current}/${e.count.needed}`),r}}},5049:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.registerAllCommands=void 0;const a=s(n(7484)),u=s(n(5534)),l=r(n(7549)),c=n(4295),d=n(1046),f=n(9242),p=n(112),h=n(4158),m=n(179),g=n(4738),v=n(667),T=n(855),w=n(4291),D=n(9368),y=n(974),b=n(4523);t.registerAllCommands=function(){async function e(e,t){const n=p.extensionConfig.addCreationDate?`{cr:${v.getDateInISOFormat(new Date,p.extensionConfig.creationDateIncludeTime)}} `:"";return await c.appendTaskToFile(`${n}${e}`,t)}l.commands.registerCommand("todomd.toggleDone",(async e=>{const t=l.window.activeTextEditor;let n,o=[];if(e)o.push(e.task.lineNumber),n=await w.getActiveDocument();else{if(!t)return;for(const e of t.selections)for(let t=e.start.line;t<=e.end.line;t++)o.push(t);o=Array.from(new Set(o)),n=t.document}for(const e of o)await c.toggleDoneOrIncrementCount(n,e);await p.updateState(),T.updateAllTreeViews()})),l.commands.registerCommand("todomd.hideTask",(async e=>{if(!e)return;const t=e.task.lineNumber,n=await w.getActiveDocument();c.hideTask(n,t),await p.updateState(),T.updateAllTreeViews()})),l.commands.registerCommand("todomd.collapseAllNestedTasks",(async()=>{const e=new l.WorkspaceEdit,t=await w.getActiveDocument();D.forEachTask((n=>{n.hasNestedTasks()&&!n.isCollapsed&&c.toggleTaskCollapseWorkspaceEdit(e,t,n.lineNumber)})),await w.applyEdit(e,t),f.updateEverything()})),l.commands.registerCommand("todomd.expandAllTasks",(async()=>{const e=new l.WorkspaceEdit,t=await w.getActiveDocument();D.forEachTask((n=>{n.hasNestedTasks()&&n.isCollapsed&&c.toggleTaskCollapseWorkspaceEdit(e,t,n.lineNumber)})),await w.applyEdit(e,t),f.updateEverything()})),l.commands.registerCommand("todomd.deleteTask",(async e=>{if(!e)return;const t=e.task.lineNumber,n=await w.getActiveDocument();await c.tryToDeleteTask(n,t),await p.updateState(),T.updateAllTreeViews()})),l.commands.registerTextEditorCommand("todomd.archiveCompletedTasks",(e=>{const t=p.extensionState.tasks.filter((e=>e.done));c.archiveTasks(t,e.document)})),l.commands.registerTextEditorCommand("todomd.archiveSelectedCompletedTasks",(e=>{const t=e.selection,n=[];for(let e=t.start.line;e<=t.end.line;e++){const t=D.findTaskAtLineExtension(e);t&&t.done&&n.push(t)}c.archiveTasks(n,e.document)})),l.commands.registerTextEditorCommand("todomd.sortByPriority",((e,t)=>{const n=e.selection;if(n.isEmpty)return void l.default.window.showInformationMessage("Select tasks to sort");const o=n.start.line,i=n.end.line,r=[];for(let e=o;e<=i;e++){const t=D.findTaskAtLineExtension(e);t&&r.push(t)}const s=h.sortTasks(r,0).map((e=>e.rawText)).join("\n");t.replace(b.getFullRangeFromLines(e.document,o,i),s)})),l.commands.registerTextEditorCommand("todomd.createSimilarTask",(async e=>{const t=e.selection,n=D.findTaskAtLineExtension(t.start.line);if(!n)return;const o=e.document.lineAt(n.lineNumber),i=new l.WorkspaceEdit,r=n.tags.map((e=>` #${e}`)).join(""),s=n.projects.map((e=>`+${e}`)).join(" "),a=n.contexts.map((e=>`@${e}`)).join(" ");let u=r;u+=s?` ${s}`:"",u+=a?` ${a}`:"",i.insert(e.document.uri,new l.default.Position(o.rangeIncludingLineBreak.end.line,o.rangeIncludingLineBreak.end.character),`${u}\n`),await w.applyEdit(i,e.document),e.selection=new l.default.Selection(o.lineNumber+1,0,o.lineNumber+1,0)})),l.commands.registerCommand("todomd.getNextTask",(async()=>{await p.updateState();const e=p.extensionState.tasks.filter((e=>!e.done));if(!e.length)return void l.default.window.showInformationMessage("No tasks");const t=h.defaultSortTasks(e)[0];if(t.links.length){const e="Follow link";await l.default.window.showInformationMessage(m.TheTask.formatTask(t),e)===e&&b.followLinks(t.links)}else l.default.window.showInformationMessage(m.TheTask.formatTask(t))})),l.commands.registerCommand("todomd.getFewNextTasks",(async()=>{await p.updateState();const e=p.extensionState.tasks.filter((e=>!e.done));if(!e.length)return void l.default.window.showInformationMessage("No tasks");const t=h.defaultSortTasks(e).slice(0,p.extensionConfig.getNextNumberOfTasks);l.default.window.showInformationMessage(t.map(((e,t)=>`${y.fancyNumber(t+1)} ${m.TheTask.formatTask(e)}`)).join("\n"),{modal:!0})})),l.commands.registerCommand("todomd.getRandomTask",(async()=>{await p.updateState();const e=p.extensionState.tasks.filter((e=>!e.done));e.length?l.window.showInformationMessage(m.TheTask.formatTask(u.default(e))):l.default.window.showInformationMessage("No tasks")})),l.commands.registerCommand("todomd.addTaskToDefaultFile",(async()=>{if(!await w.checkDefaultFileAndNotify())return;const t=await l.window.showInputBox({prompt:"Add a task to default file"});t&&(await e(t,p.extensionConfig.defaultFile),await p.updateState(),T.updateAllTreeViews())})),l.commands.registerCommand("todomd.addTaskToActiveFile",(async()=>{var t;const n=null===(t=p.extensionState.activeDocument)||void 0===t?void 0:t.uri.fsPath;if(!n)return;const o=await l.window.showInputBox({prompt:"Add a task to active file"});o&&(e(o,n),await p.updateState(),T.updateAllTreeViews())})),l.commands.registerTextEditorCommand("todomd.setDueDate",(e=>{const t=e.selection.active.line,n=l.window.createInputBox();let o="+0";n.value=o,n.title="Set due date";const i="Documentation";n.onDidTriggerButton((e=>{e.tooltip===i&&b.followLink("https://github.com/usernamehw/vscode-todo-md/blob/master/docs/docs.md#set-due-date-helper-function-todomdsetduedate")})),n.buttons=[{iconPath:new l.ThemeIcon("question"),tooltip:i}],n.prompt=b.inputOffset(new d.DueDate(g.helpCreateDueDate(o)).closestDueDateInTheFuture),n.show(),n.onDidChangeValue((e=>{o=e;const t=g.helpCreateDueDate(o);n.prompt=t?b.inputOffset(new d.DueDate(t).closestDueDateInTheFuture):b.inputOffset("❌")})),n.onDidAccept((()=>{if(!o)return;const i=g.helpCreateDueDate(o);i&&(c.setDueDate(e.document,t,i),n.hide(),n.dispose())}))})),l.commands.registerCommand("todomd.setDueDateWithArgs",(async(e,t,n)=>{const o=t.start.line,i=new l.WorkspaceEdit;i.delete(e.uri,t),await w.applyEdit(i,e),c.setDueDate(e,o,n)})),l.commands.registerCommand("todomd.openDefaultArvhiveFile",(async()=>{await w.checkArchiveFileAndNotify()&&b.openFileInEditor(p.extensionConfig.defaultArchiveFile)})),l.commands.registerCommand("todomd.openDefaultFile",(async()=>{await w.checkDefaultFileAndNotify()&&b.openFileInEditor(p.extensionConfig.defaultFile)})),l.commands.registerCommand("todomd.specifyDefaultFile",w.specifyDefaultFile),l.commands.registerCommand("todomd.completeTask",(async()=>{const e=await w.getActiveDocument(),t=p.extensionState.tasks.filter((e=>!e.done)).map((e=>m.TheTask.formatTask(e))),n=await l.window.showQuickPick(t,{placeHolder:"Choose a task to complete"});if(!n)return;const o=p.extensionState.tasks.find((e=>m.TheTask.formatTask(e)===n));o&&(o.count?await c.incrementCountForTask(e,o.lineNumber,o):await c.toggleDoneAtLine(e,o.lineNumber),await p.updateState(),T.updateAllTreeViews())})),l.commands.registerTextEditorCommand("todomd.filter",(e=>{const t=l.window.createQuickPick();let n,o;t.items=p.extensionConfig.savedFilters.map((e=>({label:e.title}))),t.onDidChangeValue((e=>{n=e})),t.onDidChangeSelection((e=>{o=e[0].label})),t.show(),t.onDidAccept((()=>{var e;let i;i=o?null===(e=p.extensionConfig.savedFilters.find((e=>e.title===o)))||void 0===e?void 0:e.filter:n,t.hide(),t.dispose(),i&&i.length&&(T.tasksView.description=i,b.setContext("todomd:filterActive",!0),p.extensionState.taskTreeViewFilterValue=i,T.updateTasksTreeView())}))})),l.commands.registerCommand("todomd.clearFilter",(e=>{T.tasksView.description=void 0,b.setContext("todomd:filterActive",!1),p.extensionState.taskTreeViewFilterValue="",T.updateTasksTreeView()})),l.commands.registerCommand("todomd.clearGlobalState",(()=>{p.extensionState.extensionContext.globalState._value={},p.extensionState.extensionContext.globalState.update("hack","toClear")})),l.commands.registerCommand("todomd.showGlobalState",(()=>{const e=p.extensionState.extensionContext.globalState.get(p.LAST_VISIT_BY_FILE_STORAGE_KEY);for(const t in e)console.log(t,new Date(e[t]),a.default().to(e[t]))})),l.commands.registerCommand("todomd.removeAllOverdue",(async()=>{const e=await w.getActiveDocument();if(!e)return;const t=new l.WorkspaceEdit;D.forEachTask((n=>{n.overdueRange&&c.removeOverdueWorkspaceEdit(t,e.uri,n)})),w.applyEdit(t,e)})),l.commands.registerCommand("todomd.goToLine",(e=>{c.goToTask(e)})),l.commands.registerTextEditorCommand("todomd.resetAllRecurringTasks",(e=>{const t=p.extensionState.lastVisitByFile[e.document.uri.toString()];c.resetAllRecurringTasks(e.document,t)})),l.commands.registerCommand("todomd.followLink",(e=>{b.followLinks(e.task.links)})),l.commands.registerTextEditorCommand("todomd.setLastVisit",(async e=>{const t=Number(await l.default.window.showInputBox({prompt:"Number of Hours ago"}));t&&p.updateLastVisitGlobalState(e.document.uri.toString(),a.default().subtract(t,"hour").toDate())})),l.commands.registerTextEditorCommand("todomd.incrementPriority",(e=>{const t=e.selection.active.line;c.incrementOrDecrementPriority(e.document,t,"increment")})),l.commands.registerTextEditorCommand("todomd.decrementPriority",(e=>{const t=e.selection.active.line;c.incrementOrDecrementPriority(e.document,t,"decrement")})),l.commands.registerCommand("todomd.showWebviewSettings",(e=>{b.openSettingGuiAt("todomd.webview")})),l.commands.registerTextEditorCommand("todomd.toggleComment",(e=>{const t=new l.WorkspaceEdit,n=e.selections;for(const o of n){const n=o.start.line,i=o.end.line;for(let o=n;o<=i;o++)c.toggleCommentAtLineWorkspaceEdit(t,e.document,o)}w.applyEdit(t,e.document)}))}},3767:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateCompletions=void 0;const i=o(n(7484)),r=o(n(7549)),s=n(1046),a=n(112),u=n(4738),l=n(667),c=n(4523);t.updateCompletions=function(){a.Global.tagAutocompleteDisposable&&(a.Global.tagAutocompleteDisposable.dispose(),a.Global.projectAutocompleteDisposable.dispose(),a.Global.contextAutocompleteDisposable.dispose(),a.Global.generalAutocompleteDisposable.dispose()),a.Global.tagAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const n=c.getWordAtPosition(e,t);if(!n||!n.startsWith("#"))return;const o=[],i=Array.from(new Set(a.extensionState.tags.concat(a.extensionConfig.tags)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["#"],o.push(t)}return o}},"#"),a.Global.projectAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const n=c.getWordAtPosition(e,t);if(!n||!n.startsWith("+"))return;const o=[],i=Array.from(new Set(a.extensionState.projects.concat(a.extensionConfig.projects)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["+"],o.push(t)}return o}},"+"),a.Global.contextAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const n=c.getWordAtPosition(e,t);if(!n||!n.startsWith("@"))return;const o=[],i=Array.from(new Set(a.extensionState.contexts.concat(a.extensionConfig.contexts)));for(const e of i){const t=new r.default.CompletionItem(e,r.default.CompletionItemKind.Field);t.commitCharacters=["@"],o.push(t)}return o}},"@"),a.Global.generalAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const n=[],o=new r.default.CompletionItem("TODAY",r.default.CompletionItemKind.Constant);o.insertText=l.getDateInISOFormat(new Date);const s=new r.default.CompletionItem("SET_DUE_TODAY",r.default.CompletionItemKind.Constant);s.insertText=`{due:${l.getDateInISOFormat(new Date)}}`;const a=new r.default.CompletionItem("SET_DUE_TOMORROW",r.default.CompletionItemKind.Constant);a.insertText=`{due:${l.getDateInISOFormat(i.default().add(1,"day"))}}`;const u=new r.default.CompletionItem("SET_DUE_YESTERDAY",r.default.CompletionItemKind.Constant);return u.insertText=`{due:${l.getDateInISOFormat(i.default().subtract(1,"day"))}}`,n.push(o,s,a,u),n}},""),a.Global.setDueDateAutocompleteDisposable=r.default.languages.registerCompletionItemProvider({scheme:"file"},{provideCompletionItems(e,t){const n=c.getWordRangeAtPosition(e,t),o=c.getWordAtPosition(e,t);if(o){if("$"===o[o.length-1]){const t=u.helpCreateDueDate(o.slice(0,-1));if(!t)return[];const i=new r.default.CompletionItem(new s.DueDate(t).closestDueDateInTheFuture,r.default.CompletionItemKind.Constant);return i.insertText="",i.filterText=o,i.command={command:"todomd.setDueDateWithArgs",title:"Set Due Date with arguments",arguments:[e,n,t]},[i]}return[]}}},"$")}},1613:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateEditorDecorations=t.updateDecorationStyle=void 0;const s=r(n(7549)),a=n(112);t.updateDecorationStyle=function(){a.Global.completedTaskDecorationType=s.window.createTextEditorDecorationType({isWholeLine:!0,textDecoration:"line-through rgba(255, 255, 255, 0.35)",light:{textDecoration:"line-through rgba(0, 0, 0, 0.25)"},...a.extensionConfig.decorations.completedTask}),a.Global.commentDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.commentForeground"),isWholeLine:!0,...a.extensionConfig.decorations.comment}),a.Global.priorityADecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityAForeground"),...a.extensionConfig.decorations.priorityAForeground}),a.Global.priorityBDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityBForeground"),...a.extensionConfig.decorations.priorityBForeground}),a.Global.priorityCDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityCForeground"),...a.extensionConfig.decorations.priorityCForeground}),a.Global.priorityDDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityDForeground"),...a.extensionConfig.decorations.priorityDForeground}),a.Global.priorityEDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityEForeground"),...a.extensionConfig.decorations.priorityEForeground}),a.Global.priorityFDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.priorityFForeground"),...a.extensionConfig.decorations.priorityFForeground}),a.Global.tagsDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.tagForeground")}),a.Global.specialTagDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.specialTagForeground")}),a.Global.tagsDelimiterDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.tagDelimiterForeground")}),a.Global.projectDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.projectForeground"),...a.extensionConfig.decorations.project}),a.Global.contextDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.contextForeground"),...a.extensionConfig.decorations.context}),a.Global.notDueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.notDueForeground"),...a.extensionConfig.decorations.notDue}),a.Global.dueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.dueForeground"),...a.extensionConfig.decorations.due}),a.Global.overdueDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.overdueForeground"),...a.extensionConfig.decorations.overdue}),a.Global.invalidDueDateDecorationType=s.window.createTextEditorDecorationType({color:new s.default.ThemeColor("todomd.invalidDueDateForeground"),backgroundColor:new s.default.ThemeColor("todomd.invalidDueDateBackground"),...a.extensionConfig.decorations.invalidDue}),a.Global.closestDueDateDecorationType=s.window.createTextEditorDecorationType({after:{color:new s.default.ThemeColor("todomd.closestDueDateForeground"),margin:"1ch",backgroundColor:new s.default.ThemeColor("todomd.closestDueDateBackground")}})},t.updateEditorDecorations=function(e){const t=[],n=[],o=[],i=[],r=[],u=[],l=[],c=[],d=[],f=[],p=[],h=[],m=[],g=[],v=[],T=[],w=[];for(const e of a.extensionState.tasks){if(e.done&&t.push(new s.default.Range(e.lineNumber,0,e.lineNumber,0)),e.tagsRange&&(n.push(...e.tagsRange),d.push(...e.tagsDelimiterRanges)),e.priorityRange)switch(e.priority){case"A":o.push(e.priorityRange);break;case"B":i.push(e.priorityRange);break;case"C":r.push(e.priorityRange);break;case"D":u.push(e.priorityRange);break;case"E":l.push(e.priorityRange);break;default:c.push(e.priorityRange)}if(e.specialTagRanges.length&&f.push(...e.specialTagRanges),e.contextRanges&&e.contextRanges.length&&h.push(...e.contextRanges),e.projectRanges&&e.projectRanges.length&&p.push(...e.projectRanges),e.due){const t=e.due,n=e.dueRange;1===t.isDue?g.push(n):0===t.isDue?m.push(n):2===t.isDue?(v.push(n),e.overdueRange&&f.push(e.overdueRange)):3===t.isDue&&T.push(n),0===t.isDue&&t.closestDueDateInTheFuture&&w.push({range:new s.default.Range(n.end.line,n.end.character-1,n.end.line,n.end.character-1),renderOptions:{after:{contentText:t.closestDueDateInTheFuture}}})}}e.setDecorations(a.Global.completedTaskDecorationType,t),e.setDecorations(a.Global.tagsDecorationType,n),e.setDecorations(a.Global.specialTagDecorationType,f),e.setDecorations(a.Global.priorityADecorationType,o),e.setDecorations(a.Global.priorityBDecorationType,i),e.setDecorations(a.Global.priorityCDecorationType,r),e.setDecorations(a.Global.priorityDDecorationType,u),e.setDecorations(a.Global.priorityEDecorationType,l),e.setDecorations(a.Global.priorityFDecorationType,c),e.setDecorations(a.Global.tagsDelimiterDecorationType,d),e.setDecorations(a.Global.projectDecorationType,p),e.setDecorations(a.Global.contextDecorationType,h),e.setDecorations(a.Global.notDueDecorationType,m),e.setDecorations(a.Global.dueDecorationType,g),e.setDecorations(a.Global.overdueDecorationType,v),e.setDecorations(a.Global.invalidDueDateDecorationType,T),e.setDecorations(a.Global.closestDueDateDecorationType,w),e.setDecorations(a.Global.commentDecorationType,a.extensionState.commentLines)}},4295:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.toggleCommentAtLineWorkspaceEdit=t.setCountCurrentValueWorkspaceEdit=t.archiveTaskWorkspaceEdit=t.removeCompletionDateWorkspaceEdit=t.removeDoneSymbolWorkspaceEdit=t.insertCompletionDateWorkspaceEdit=t.removeOverdueWorkspaceEdit=t.deleteTaskWorkspaceEdit=t.toggleTaskCollapseWorkspaceEdit=t.appendTaskToFile=t.resetAllRecurringTasks=t.goToTask=t.archiveTasks=t.toggleDoneAtLine=t.incrementOrDecrementPriority=t.decrementCountForTask=t.incrementCountForTask=t.toggleDoneOrIncrementCount=t.tryToDeleteTask=t.setDueDate=t.toggleTaskCollapse=t.hideTask=void 0;const a=s(n(7484)),u=r(n(7549)),l=n(1046),c=n(112),d=n(8306),f=n(667),p=n(855),h=n(4291),m=n(9368);async function g(e,t,n){const o=e.lineAt(t),i=new u.WorkspaceEdit,r=n.count;if(!r)return Promise.resolve(void 0);let s=0;return r.current!==r.needed?(s=r.current+1,s===r.needed&&(b(i,e.uri,o),y(i,e.uri,n)),_(i,e.uri,r,String(s))):(_(i,e.uri,r,"0"),x(i,e.uri,n)),h.applyEdit(i,e)}async function v(e,t){const{firstNonWhitespaceCharacterIndex:n}=e.lineAt(t),o=m.findTaskAtLineExtension(t);if(!o)return;o.overdue&&await async function(e,t){const n=new u.WorkspaceEdit;return y(n,e.uri,t),h.applyEdit(n,e)}(e,o);const i=e.lineAt(t),r=new u.WorkspaceEdit;o.done?c.extensionConfig.addCompletionDate?x(r,e.uri,o):i.text.trim().startsWith(c.extensionConfig.doneSymbol)&&r.delete(e.uri,new u.default.Range(t,n,t,n+c.extensionConfig.doneSymbol.length)):c.extensionConfig.addCompletionDate?b(r,e.uri,i):r.insert(e.uri,new u.default.Position(t,n),c.extensionConfig.doneSymbol),await h.applyEdit(r,e),c.extensionConfig.autoArchiveTasks&&await T([o],e)}async function T(e,t){var n;if(!await h.checkArchiveFileAndNotify())return;const o=new u.WorkspaceEdit,i=new u.WorkspaceEdit,r=u.default.Uri.file(c.extensionConfig.defaultArchiveFile),s=await u.default.workspace.openTextDocument(r);let a=[];for(const t of e)void 0===t.parentTaskLineNumber&&((null===(n=t.due)||void 0===n?void 0:n.isRecurring)||(a.push(t.lineNumber),t.subtasks.length&&a.push(...t.getNestedTasksLineNumbers())));a=Array.from(new Set(a));for(const e of a){if(!m.findTaskAtLineExtension(e))continue;const n=t.lineAt(e);C(o,i,s,t.uri,n,!0)}await h.applyEdit(o,t),await h.applyEdit(i,s),p.updateArchivedTasks()}function w(e,t,n){const o=t.lineAt(n),i=m.findTaskAtLineExtension(n);(null==i?void 0:i.collapseRange)?e.delete(t.uri,i.collapseRange):e.insert(t.uri,o.range.end," {c}")}function D(e,t,n){e.delete(t.uri,t.lineAt(n).rangeIncludingLineBreak)}function y(e,t,n){n.overdueRange&&e.delete(t,n.overdueRange)}function b(e,t,n){e.insert(t,new u.default.Position(n.lineNumber,n.range.end.character),` {cm:${f.getDateInISOFormat(new Date,c.extensionConfig.completionDateIncludeTime)}}`)}function k(e,t,n){n.text.trim().startsWith(c.extensionConfig.doneSymbol)&&e.delete(t,new u.default.Range(n.lineNumber,n.firstNonWhitespaceCharacterIndex,n.lineNumber,n.firstNonWhitespaceCharacterIndex+c.extensionConfig.doneSymbol.length))}function x(e,t,n){n.completionDateRange&&e.delete(t,n.completionDateRange)}function C(e,t,n,o,i,r){!function(e,t,n){const o=t.lineAt(t.lineCount-1).rangeIncludingLineBreak.end;e.insert(t.uri,o,`\n${n}`)}(t,n,i.text),r&&e.delete(o,i.rangeIncludingLineBreak)}function S(e,t,n,o){e.insert(t,new u.default.Position(n.lineNumber,n.range.end.character),` {overdue:${o}}`)}function _(e,t,n,o){const i=n.range.start.character+"count:".length+1,r=new u.default.Range(n.range.start.line,i,n.range.start.line,i+String(n.current).length);e.replace(t,r,String(o))}t.hideTask=async function(e,t){const n=new u.WorkspaceEdit,o=e.lineAt(t);return n.insert(e.uri,o.range.end," {h}"),h.applyEdit(n,e)},t.toggleTaskCollapse=async function(e,t){const n=new u.WorkspaceEdit;return w(n,e,t),h.applyEdit(n,e)},t.setDueDate=async function(e,t,n){const o=`{due:${n}}`,i=new u.WorkspaceEdit,r=m.findTaskAtLineExtension(t);if((null==r?void 0:r.overdueRange)&&i.delete(e.uri,r.overdueRange),null==r?void 0:r.dueRange)i.replace(e.uri,r.dueRange,o);else{const n=e.lineAt(t),r=n.text.endsWith(" ");i.insert(e.uri,n.range.end,`${r?"":" "}${o}`)}return await h.applyEdit(i,e)},t.tryToDeleteTask=async function(e,t){const n=m.findTaskAtLineExtension(t);if(!n)return;const o=new u.WorkspaceEdit;let i="",r="",s=!1;const a=[t];n.subtasks.length&&a.push(...n.getNestedTasksLineNumbers());for(const e of a){const t=m.findTaskAtLineExtension(e);t&&(r+=`${t.rawText.replace(/\s\s/g,"┄")}\n`)}if(i=`❗ [ ${a.length} ] task${a.length>1?"s":""} will be deleted.`,("always"===c.extensionConfig.confirmTaskDelete||"hasNestedTasks"===c.extensionConfig.confirmTaskDelete&&n.subtasks.length)&&(s=!0),s){const e="Delete";if(await u.default.window.showWarningMessage(`${i}\n${r}`,{modal:!0},e)!==e)return}for(const t of a)D(o,e,t);return h.applyEdit(o,e)},t.toggleDoneOrIncrementCount=async function(e,t){const n=m.findTaskAtLineExtension(t);if(n)return n.count?await g(e,t,n):void await v(e,t)},t.incrementCountForTask=g,t.decrementCountForTask=async function(e,t,n){const o=new u.WorkspaceEdit,i=n.count;if(i&&0!==i.current)return i.current===i.needed&&x(o,e.uri,n),_(o,e.uri,i,String(i.current-1)),h.applyEdit(o,e)},t.incrementOrDecrementPriority=async function(e,t,n){const o=m.findTaskAtLineExtension(t);if(!o||"increment"===n&&"A"===o.priority||"decrement"===n&&"Z"===o.priority)return;const i="increment"===n?String.fromCharCode(o.priority.charCodeAt(0)-1):String.fromCharCode(o.priority.charCodeAt(0)+1),r=new u.WorkspaceEdit;return o.priorityRange?r.replace(e.uri,o.priorityRange,`(${i})`):r.insert(e.uri,new u.default.Position(t,0),`(${i}) `),h.applyEdit(r,e)},t.toggleDoneAtLine=v,t.archiveTasks=T,t.goToTask=async function(e){const t=await h.getActiveDocument(),n=await u.default.window.showTextDocument(t),o=new u.default.Range(e,0,e,0);n.selection=new u.default.Selection(o.start,o.end),n.revealRange(o,u.default.TextEditorRevealType.Default);const i=u.default.window.createTextEditorDecorationType({backgroundColor:"#ffa30468",isWholeLine:!0});n.setDecorations(i,[o]),setTimeout((()=>{n.setDecorations(i,[])}),700)},t.resetAllRecurringTasks=async function(e,t=new Date){var n;"string"==typeof t&&(t=new Date(t));const o=new u.WorkspaceEdit,i=(await d.parseDocument(e)).tasks,r=new Date,s=new Date(r.getFullYear(),r.getMonth(),r.getDate());for(const r of i)if(null===(n=r.due)||void 0===n?void 0:n.isRecurring){const n=e.lineAt(r.lineNumber);if(r.done)k(o,e.uri,n),x(o,e.uri,r);else if(!r.overdue&&!a.default().isSame(t,"day")){const i=new Date(t.getFullYear(),t.getMonth(),t.getDate());for(let t=a.default(s).diff(i,"day");t>0;t--){const i=a.default().subtract(t,"day"),s=new l.DueDate(r.due.raw,{targetDate:i.toDate()});if(1===s.isDue||2===s.isDue){S(o,e.uri,n,i.format(f.DATE_FORMAT));break}}}const i=r.count;i&&_(o,e.uri,i,"0")}return h.applyEdit(o,e)},t.appendTaskToFile=async function(e,t){const n=u.default.Uri.file(t),o=await u.default.workspace.openTextDocument(n),i=new u.WorkspaceEdit,r=o.lineAt(o.lineCount-1).rangeIncludingLineBreak.end;return i.insert(n,r,`\n${e}`),h.applyEdit(i,o)},t.toggleTaskCollapseWorkspaceEdit=w,t.deleteTaskWorkspaceEdit=D,t.removeOverdueWorkspaceEdit=y,t.insertCompletionDateWorkspaceEdit=b,t.removeDoneSymbolWorkspaceEdit=k,t.removeCompletionDateWorkspaceEdit=x,t.archiveTaskWorkspaceEdit=C,t.setCountCurrentValueWorkspaceEdit=_,t.toggleCommentAtLineWorkspaceEdit=function(e,t,n){t.lineAt(n).text.startsWith("# ")?e.delete(t.uri,new u.default.Range(n,0,n,2)):e.insert(t.uri,new u.default.Position(n,0),"# ")}},1046:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DueDate=void 0;const i=o(n(7484)),r=n(667);class s{constructor(e,t){this.isRecurring=!1,this.isDue=0,this.raw=e;const n=s.parseDue(e,null==t?void 0:t.targetDate,null==t?void 0:t.overdue);this.isRecurring=n.isRecurring,this.isDue=n.isDue,this.overdueStr=null==t?void 0:t.overdue,0===n.isDue?this.closestDueDateInTheFuture=this.calcClosestDueDateInTheFuture():1===n.isDue||2===n.isDue?this.closestDueDateInTheFuture=`${r.dayOfTheWeek(i.default())} [today]`:this.closestDueDateInTheFuture="",this.overdueStr&&(this.overdueInDays=this.getOverdueInDays())}calcClosestDueDateInTheFuture(){for(let e=1;e<100;e++){const t=i.default().add(e,"day"),{isDue:n}=s.parseDue(this.raw,t.toDate());if(n)return`${r.dayOfTheWeek(t)} [${r.dateDiff(t)}]`}return"More than 100 days"}getOverdueInDays(){return this.overdueStr?i.default().diff(this.overdueStr,"day"):0}static parseDue(e,t=new Date,n){const o=e.split(",").filter((e=>e.length)).map((e=>s.parseDueDate(e,t))),i=o.some((e=>e.isRecurring)),r=o.some((e=>3===e.isDue)),a=o.some((e=>2===e.isDue))||n,u=o.some((e=>1===e.isDue));return{isDue:r?3:a?2:u?1:0,isRecurring:i}}static parseDueDate(e,t){if("today"===e)return{isRecurring:!1,isDue:1};let n=!1,o=0;const i=s.dueWithDateRegexp.exec(e);if(i){const e=Number(i[1]),a=Number(i[2])-1,u=Number(i[3]),l=new Date(e,a,u),c=i[5];if(!r.isValidDate(e,a,u))return{isRecurring:Boolean(c),isDue:3};c?(n=!0,o=s.isDueWithDate(c,l,t)):(o=s.isDueExactDate(l,t),n=!1)}else s.dueRecurringRegexp.test(e)?(n=!0,o=s.isDueToday(e,t)):o=3;return{isDue:o,isRecurring:n}}static isDueExactDate(e,t){return i.default(t).isBefore(e)?0:0===i.default(e).diff(i.default(t),"day")?1:2}static isDueToday(e,t){const n=e.toLowerCase();if("ed"===n)return 1;switch(t.getDay()){case 0:if("sun"===n||"sunday"===n)return 1;break;case 1:if("mon"===n||"monday"===n)return 1;break;case 2:if("tue"===n||"tuesday"===n)return 1;break;case 3:if("wed"===n||"wednesday"===n)return 1;break;case 4:if("thu"===n||"thursday"===n)return 1;break;case 5:if("fri"===n||"friday"===n)return 1;break;case 6:if("sat"===n||"saturday"===n)return 1}return 0}static isDueWithDate(e,t,n=new Date){if(void 0===t)throw new Error("dueDate was specified, but dueDateStart is missing");const o=/e(\d+)(d)/.exec(e);if(o){const e=o[1]?+o[1]:1;if("d"===o[2]&&i.default(n).diff(t,"day")%e==0)return 1}return 0}}t.DueDate=s,s.dueWithDateRegexp=/^(\d\d\d\d)-(\d\d)-(\d\d)(\|(e\d+d))?$/,s.dueRecurringRegexp=/^(ed|sun|sunday|mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday)$/i},9242:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateEverything=t.deactivateEditorFeatures=t.activateEditorFeatures=t.isTheRightFileName=t.onChangeTextDocument=t.checkIfNeedResetRecurringTasks=t.onChangeActiveTextEditor=void 0;const a=s(n(7484)),u=r(n(7549)),l=n(3767),c=n(1613),d=n(4295),f=n(112),p=n(1244),h=n(855),m=n(4291),g=n(4523);function v(e){const t=f.extensionState.lastVisitByFile[e];return t?a.default().isSame(t,"day")?void 0:{lastVisit:t}:{lastVisit:new Date}}function T(e){const t=u.window.activeTextEditor;t&&f.extensionState.theRightFileOpened&&b(t)}function w(e){return 0!==u.default.languages.match({pattern:f.extensionConfig.activatePattern},e.document)}async function D(e){f.extensionState.theRightFileOpened=!0,f.Global.changeTextDocumentDisposable=u.workspace.onDidChangeTextDocument(T),l.updateCompletions(),p.updateHover(),f.statusBar.show(),await g.setContext("todomd:isActive",!0);const t=v(e.document.uri.toString());t&&(await d.resetAllRecurringTasks(e.document,t.lastVisit),b(),f.updateLastVisitGlobalState(e.document.uri.toString(),new Date))}function y(){f.extensionState.theRightFileOpened=!1,f.Global.changeTextDocumentDisposable&&f.Global.changeTextDocumentDisposable.dispose(),f.Global.contextAutocompleteDisposable&&(f.Global.contextAutocompleteDisposable.dispose(),f.Global.tagAutocompleteDisposable.dispose(),f.Global.projectAutocompleteDisposable.dispose(),f.Global.generalAutocompleteDisposable.dispose(),f.Global.setDueDateAutocompleteDisposable.dispose()),f.Global.hoverDisposable&&f.Global.hoverDisposable.dispose(),f.statusBar.hide(),g.setContext("todomd:isActive",!1)}async function b(e){await f.updateState(),e&&(c.updateEditorDecorations(e),f.statusBar.updateText(f.extensionState.tasks)),h.updateAllTreeViews()}t.onChangeActiveTextEditor=async function(e){f.extensionState.theRightFileOpened&&y(),e&&w(e)?(f.extensionState.activeDocument=e.document,f.extensionState.activeDocumentTabSize="number"==typeof e.options.tabSize?e.options.tabSize:f.extensionConfig.tabSize,b(e),await D(e)):(f.extensionState.activeDocument=await m.getDocumentForDefaultFile(),f.extensionState.activeDocumentTabSize=f.extensionConfig.tabSize,setTimeout((()=>{b()}),15))},t.checkIfNeedResetRecurringTasks=v,t.onChangeTextDocument=T,t.isTheRightFileName=w,t.activateEditorFeatures=D,t.deactivateEditorFeatures=y,t.updateEverything=b},112:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deactivate=t.updateLastVisitGlobalState=t.updateState=t.activate=t.Global=t.statusBar=t.extensionConfig=t.LAST_VISIT_BY_FILE_STORAGE_KEY=t.EXTENSION_NAME=t.extensionState=void 0;const a=s(n(7484)),u=s(n(6607)),l=s(n(9542)),c=s(n(4110)),d=r(n(7549)),f=n(5049),p=n(1613),h=n(4295),m=n(9242),g=n(8306),v=n(6158),T=n(855),w=n(4291),D=n(4523),y=n(4641);a.default.extend(u.default),a.default.extend(c.default),a.default.extend(l.default),a.default.Ls.en.weekStart=1,t.extensionState={tasks:[],tasksAsTree:[],tags:[],projects:[],contexts:[],tagsForTreeView:[],projectsForTreeView:[],contextsForTreeView:[],archivedTasks:[],commentLines:[],theRightFileOpened:!1,lastVisitByFile:{},taskTreeViewFilterValue:"",extensionContext:{},activeDocument:void 0,activeDocumentTabSize:4},t.EXTENSION_NAME="todomd",t.LAST_VISIT_BY_FILE_STORAGE_KEY="LAST_VISIT_BY_FILE_STORAGE_KEY",t.extensionConfig=d.workspace.getConfiguration(t.EXTENSION_NAME),t.statusBar=new v.StatusBar;class b{}async function k(){let e=t.extensionState.activeDocument;if(e||(e=await w.getDocumentForDefaultFile()),!e)return t.extensionState.activeDocument=void 0,t.extensionState.theRightFileOpened=!1,t.extensionState.tasks=[],t.extensionState.tags=[],t.extensionState.contexts=[],t.extensionState.projects=[],t.extensionState.commentLines=[],t.extensionState.projectsForTreeView=[],t.extensionState.tagsForTreeView=[],void(t.extensionState.contextsForTreeView=[]);const n=await g.parseDocument(e);t.extensionState.tasks=n.tasks,t.extensionState.tasksAsTree=n.tasksAsTree,t.extensionState.commentLines=n.commentLines;const o=T.groupAndSortTreeItems(t.extensionState.tasksAsTree);t.extensionState.tagsForTreeView=o.sortedTagsForProvider,t.extensionState.projectsForTreeView=o.projectsForProvider,t.extensionState.contextsForTreeView=o.contextsForProvider,t.extensionState.tags=o.tags,t.extensionState.projects=o.projects,t.extensionState.contexts=o.contexts}function x(){b.completedTaskDecorationType&&(b.completedTaskDecorationType.dispose(),b.commentDecorationType.dispose(),b.priorityADecorationType.dispose(),b.priorityBDecorationType.dispose(),b.priorityCDecorationType.dispose(),b.priorityDDecorationType.dispose(),b.priorityEDecorationType.dispose(),b.priorityFDecorationType.dispose(),b.tagsDecorationType.dispose(),b.specialTagDecorationType.dispose(),b.tagsDelimiterDecorationType.dispose(),b.projectDecorationType.dispose(),b.contextDecorationType.dispose(),b.notDueDecorationType.dispose(),b.dueDecorationType.dispose(),b.overdueDecorationType.dispose(),b.invalidDueDateDecorationType.dispose(),b.closestDueDateDecorationType.dispose()),b.changeTextDocumentDisposable&&b.changeTextDocumentDisposable.dispose()}async function C(e,n){t.extensionState.lastVisitByFile[e]=n,await t.extensionState.extensionContext.globalState.update(t.LAST_VISIT_BY_FILE_STORAGE_KEY,t.extensionState.lastVisitByFile)}t.Global=b,t.activate=async function(e){t.extensionState.extensionContext=e;const n=e.globalState.get(t.LAST_VISIT_BY_FILE_STORAGE_KEY);t.extensionState.lastVisitByFile=n||{},p.updateDecorationStyle(),f.registerAllCommands(),T.createAllTreeViews();const o=await w.getDocumentForDefaultFile();if(o){const e=o.uri.toString(),t=m.checkIfNeedResetRecurringTasks(e);t&&(await h.resetAllRecurringTasks(o,t.lastVisit),await C(e,new Date))}function i(){t.extensionConfig.isDev&&D.setContext("todomd:isDev",!0)}m.onChangeActiveTextEditor(d.window.activeTextEditor),await k(),b.webviewProvider=new y.TasksWebviewViewProvider(t.extensionState.extensionContext.extensionUri),t.extensionState.extensionContext.subscriptions.push(d.default.window.registerWebviewViewProvider(y.TasksWebviewViewProvider.viewType,b.webviewProvider)),T.updateAllTreeViews(),T.updateArchivedTasks(),i(),b.changeActiveTextEditorDisposable=d.window.onDidChangeActiveTextEditor(m.onChangeActiveTextEditor),e.subscriptions.push(d.workspace.onDidChangeConfiguration((function(e){e.affectsConfiguration(t.EXTENSION_NAME)&&(t.extensionConfig=d.workspace.getConfiguration(t.EXTENSION_NAME),x(),p.updateDecorationStyle(),m.updateEverything(),i())})))},t.updateState=k,t.updateLastVisitGlobalState=C,t.deactivate=function(){x(),b.tagAutocompleteDisposable.dispose(),b.projectAutocompleteDisposable.dispose(),b.contextAutocompleteDisposable.dispose(),b.generalAutocompleteDisposable.dispose(),b.setDueDateAutocompleteDisposable.dispose(),b.changeTextDocumentDisposable.dispose(),b.hoverDisposable.dispose(),b.changeActiveTextEditorDisposable.dispose()}},1322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.filterItems=void 0,t.filterItems=function(e,t){if(0===t.length)return e;const n=function(e){const t=[],n=/(-)?"(.+?)"/,o=n.exec(e);o&&(t.push({filterType:1,value:o[2],isNegation:Boolean(o[1])}),e=e.replace(n,""));const i=e.split(" ");for(const e of i){if(!e.length)continue;const n={isNegation:!1,value:"",filterType:0};let o,i,r;switch("-"===e[0]?(o=!0,i=e.slice(2),r=e[1]):">"===e[0]||"<"===e[0]?(r=e[1],i=e.slice(2),n.filterMoreLess=">"===e[0]?1:2):(i=e.slice(1),r=e[0]),r){case"#":{const n=e.split("#").filter((e=>e.length));for(const e of n)t.push({filterType:2,value:e});continue}case"@":n.filterType=3;break;case"+":n.filterType=4;break;case"$":"done"===i?n.filterType=9:"due"===i?n.filterType=6:"overdue"===i?n.filterType=7:"recurring"===i?n.filterType=8:"noProject"===i?n.filterType=11:"noContext"===i?n.filterType=12:"noTag"===i?n.filterType=10:/^[A-Z]$/.test(i)&&(n.filterType=5);break;default:i=e,n.filterType=0}n.value=i,n.isNegation=o,t.push(n)}return t}(t);return e.filter((e=>{var t,o,i,r;const s=[];for(const a of n){let n;0===a.filterType?n=!!e.rawText.toLowerCase().includes(a.value.toLowerCase()):1===a.filterType?n=!!e.title.toLowerCase().includes(a.value.toLowerCase()):2===a.filterType?n=!!e.tags.includes(a.value):3===a.filterType?n=!!e.contexts.includes(a.value):4===a.filterType?n=!!e.projects.includes(a.value):5===a.filterType?n=a.filterMoreLess?1===a.filterMoreLess?a.value>=e.priority:a.value<=e.priority:e.priority===a.value:9===a.filterType?n=!!e.done:6===a.filterType?n=1===(null===(t=e.due)||void 0===t?void 0:t.isDue)||2===(null===(o=e.due)||void 0===o?void 0:o.isDue):7===a.filterType?n=2===(null===(i=e.due)||void 0===i?void 0:i.isDue):8===a.filterType?n=!0===(null===(r=e.due)||void 0===r?void 0:r.isRecurring):10===a.filterType?n=0===e.tags.length:11===a.filterType?n=0===e.projects.length:12===a.filterType&&(n=0===e.contexts.length),a.isNegation&&(n=!n),s.push(n)}return s.every((e=>!0===e))}))}},2014:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTaskHover=void 0;const o=n(7549);t.getTaskHover=function(e){var t,n,i,r;const s=new o.MarkdownString(void 0,!0);s.isTrusted=!0;const a="A"===e.priority?"#ec4f47":"B"===e.priority?"#fd9f9a":"C"===e.priority?"#ffb648":"D"===e.priority?"#f1d900":"E"===e.priority?"#97c500":"F"===e.priority?"#00cfad":void 0;a&&s.appendMarkdown(`<span style="background-color:${a};">&thinsp;</span>&nbsp;`),e.done&&s.appendMarkdown('<span style="color:#7cc54b;">$(pass)</span> ');let u="";e.count&&(u=` \`[${e.count.current}/${e.count.needed}]\``);let l="";if(e.due||e.overdue){let o="",s="",a="$(history)";1===(null===(t=e.due)||void 0===t?void 0:t.isDue)?o="#5faedb":2===(null===(n=e.due)||void 0===n?void 0:n.isDue)?(o="#d44343",s=String(e.due.overdueInDays)):3===(null===(i=e.due)||void 0===i?void 0:i.isDue)&&(o="#7284eb",a="$(error)"),l=` <span style="color:${o||"inherit"};">${a} ${s}</span>&nbsp;`,0===(null===(r=e.due)||void 0===r?void 0:r.isDue)&&(l="")}s.appendMarkdown(`${e.title}${u}${l}\n\n`);for(const t of e.tags)s.appendMarkdown(`<span style="color:#fff;background-color:#029cdf;">&nbsp;#${t}&nbsp;</span>&nbsp;`);for(const t of e.projects)s.appendMarkdown(`<span style="color:#fff;background-color:#36cc9a;">&nbsp;+${t}&nbsp;</span>&nbsp;`);for(const t of e.contexts)s.appendMarkdown(`<span style="color:#fff;background-color:#7284eb;">&nbsp;@${t}&nbsp;</span>&nbsp;`);return s}},1244:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateHover=void 0;const i=o(n(7549)),r=n(112),s=n(2014),a=n(9368);t.updateHover=function(){r.Global.hoverDisposable&&r.Global.hoverDisposable.dispose(),r.Global.hoverDisposable=i.default.languages.registerHoverProvider({scheme:"file"},{provideHover(e,t,n){const o=a.findTaskAtLineExtension(t.line);if(o)return new i.default.Hover(s.getTaskHover(o))}})}},8306:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.parseDocument=t.parseLine=void 0;const s=r(n(7549)),a=n(1046),u=n(112),l=n(179);function c(e){let t=e.text.trim();if(!t.length)return{lineType:"empty"};const n=e.lineNumber;if(t.startsWith("# "))return{lineType:"comment"};if(t.startsWith("## ")){const e=[],n=t.slice(3).trim().split(" ");for(const t of n)t.startsWith("#")&&e.push(...t.split("#").filter((e=>e.length)));return{lineType:"specialComment",value:e}}const o=Math.floor(e.firstNonWhitespaceCharacterIndex/u.extensionState.activeDocumentTabSize);let i=e.firstNonWhitespaceCharacterIndex,r=t.startsWith(u.extensionConfig.doneSymbol);r&&(t=t.replace(u.extensionConfig.doneSymbol,""),i+=u.extensionConfig.doneSymbol.length);const c=t.split(" "),d=e.text,f=[],p=[],h=[],m=[],g=[],v=[];let T,w;const D=[],y=[],b=[];let k,x,C,S,_,A,E,O,F,M;for(const e of c){switch(e[0]){case"{":{if("}"!==e[e.length-1]){v.push(e);break}const[t,o=""]=e.slice(1,-1).split(":"),u=new s.Range(n,i,n,i+e.length);if("due"===t)o.length&&(A=new a.DueDate(o),E=u);else if("overdue"===t)C=o,O=u;else if("cr"===t)g.push(u);else if("cm"===t)r=!0,M=u,g.push(u);else if("count"===t){if(void 0===o)break;const[e,t]=o.split("/"),n=parseInt(e,10),i=parseInt(t,10);if(!Number.isFinite(n)||!Number.isFinite(i))break;g.push(u),n===i&&(r=!0),k={range:u,current:n,needed:i}}else"t"===t?(x=o,g.push(u)):"h"===t?(S=!0,g.push(u)):"c"===t?(_=!0,F=u,g.push(u)):v.push(e);break}case"#":{const t=e.split("#").filter((e=>e.length));let o=i;for(const e of t)y.push(new s.Range(n,o,n,o+1)),b.push(new s.Range(n,o+1,n,o+1+e.length)),o+=e.length+1,D.push(e);break}case"@":1!==e.length?(f.push(e.slice(1)),p.push(new s.Range(n,i,n,i+e.length))):v.push(e);break;case"+":1!==e.length?(h.push(e.slice(1)),m.push(new s.Range(n,i,n,i+e.length))):v.push(e);break;case"(":/^\([A-Z]\)$/.test(e)?(T=e[1],w=new s.Range(n,i,n,i+e.length)):v.push(e);break;default:v.push(e)}i+=e.length+1}return{lineType:"task",value:new l.TheTask({tags:D,rawText:d,tagsDelimiterRanges:y,tagsRange:b,projects:h,projectRanges:m,done:r,priority:T,priorityRange:w,specialTagRanges:g,due:A,dueRange:E,overdueRange:O,collapseRange:F,completionDateRange:M,count:k,threshold:x,overdue:C,isHidden:S,isCollapsed:_,contexts:f,contextRanges:p,title:v.join(" "),lineNumber:n,indentLvl:o})}}t.parseLine=c,t.parseDocument=async function(e){var t,n;const o=[],i=[];let r=[];const u=null!==(t=await s.default.commands.executeCommand("vscode.executeLinkProvider",e.uri))&&void 0!==t?t:[];for(let t=0;t<e.lineCount;t++){const l=c(e.lineAt(t));switch(l.lineType){case"empty":continue;case"comment":i.push(new s.Range(t,0,t,0)),r=[];continue;case"specialComment":i.push(new s.Range(t,0,t,0)),r=l.value;continue;default:{0!==r.length&&l.value.tags.push(...r);const e=u.filter((e=>e.range.start.line===t&&void 0!==e.target));if(0!==e.length&&(l.value.links=e.map((e=>({characterRange:[e.range.start.character,e.range.end.character],value:e.target.toString(!0),scheme:e.target.scheme})))),l.value.overdue&&(null===(n=l.value.due)||void 0===n?void 0:n.raw)&&(l.value.due=new a.DueDate(l.value.due.raw,{overdue:l.value.overdue})),l.value.indentLvl)for(let e=o.length-1;e>=0;e--)if(o[e].indentLvl<l.value.indentLvl){l.value.parentTaskLineNumber=o[e].lineNumber;break}o.push(l.value)}}}const d=Object.create(null);for(const e of o)d[e.lineNumber]=new l.TheTask({...e,subtasks:[]});const f=[];for(const e of o)void 0!==e.parentTaskLineNumber?d[e.parentTaskLineNumber].subtasks.push(d[e.lineNumber]):f.push(d[e.lineNumber]);return{tasksAsTree:f,tasks:o,commentLines:i}}},4158:(e,t)=>{"use strict";function n(e,t,n=0){const o=e.slice();let i=[];return 0===t&&(i=o.sort(((e,t)=>e.priority===t.priority?0:e.priority>t.priority?1:-1))),1===n?i.reverse():i}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSortTasks=t.sortTasks=void 0,t.sortTasks=n,t.defaultSortTasks=function(e){const t=e.filter((e=>{var t;return 2===(null===(t=e.due)||void 0===t?void 0:t.isDue)})),o=e.filter((e=>{var t;return 1===(null===(t=e.due)||void 0===t?void 0:t.isDue)})),i=e.filter((e=>{var t;return 3===(null===(t=e.due)||void 0===t?void 0:t.isDue)})),r=e.filter((e=>{var t;return!(null===(t=e.due)||void 0===t?void 0:t.isDue)||!e.due}));return[...n(t,0),...n(o,0),...i,...n(r,0)]}},6158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBar=void 0;const o=n(7549),i=n(112),r=n(974);t.StatusBar=class{constructor(){this.statusBarItem=o.window.createStatusBarItem(1,-2e4)}show(){i.extensionConfig.statusBarCounterEnabled&&this.statusBarItem.show()}hide(){this.statusBarItem.hide()}updateText(e){const t=e.filter((e=>e.done)),n=r.percentage(t.length,e.length).toFixed(1);this.statusBarItem.text=`${t.length}/${e.length} (${n}%)`}}},4738:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.helpCreateDueDate=void 0;const i=o(n(7484)),r=n(667);t.helpCreateDueDate=function(e,t=new Date){var n,o,s;"+"===e?e="+1":"-"===e&&(e="-1");const a=/^(\d+)$/.exec(e),u=/^(\+|-)(\d+)(d|w|m)?$/.exec(e),l=r.dayOfTheWeekRegexp.exec(e),c=/e(\d+)(d)/.exec(e),d=/^(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)\s?(\d\d?)$/i.exec(e),f=i.default(t);if(u){const e=u[1],t=Number(u[2]),o=null!==(n=u[3])&&void 0!==n?n:"d",i="d"===o?"day":"w"===o?"week":"m"===o?"month":"unknown";if("unknown"===i)return;let s;return s="+"===e?f.add(t,i):f.subtract(t,i),s.format(r.DATE_FORMAT)}if(d){const e=d[1],t=Number(d[2]);let n=f.set("month",r.monthStringToMonthIndex(e));return n=n.set("date",t),n.isBefore(f,"date")&&(n=n.add(1,"year")),n.format(r.DATE_FORMAT)}if(a){const e=f.date(),t=Number(a[1]);return(t>=e?f.set("date",t):f.add(1,"month").set("date",t)).format(r.DATE_FORMAT)}if(l){const t=r.dayOfWeekToIndexOfWeek(e);let n=f.set("day",t);return n.isBefore(f,"day")&&(n=n.add(7,"day")),n.format(r.DATE_FORMAT)}if(c){const e=null!==(o=Number(c[1]))&&void 0!==o?o:1,t=null!==(s=c[2])&&void 0!==s?s:"d";return`${i.default().format(r.DATE_FORMAT)}|e${e}${t}`}}},667:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isValidDate=t.dateAndDateDiff=t.dateDiff=t.dayOfTheWeek=t.monthStringToMonthIndex=t.dayOfWeekToIndexOfWeek=t.getDateInISOFormat=t.monthRegexp=t.dayOfTheWeekRegexp=t.DATE_TIME_FORMAT=t.TIME_FORMAT=t.DATE_FORMAT=t.ONE_WEEK_IN_MS=t.ONE_DAY_IN_MS=t.ONE_HOUR_IN_MS=t.ONE_MINUTE_IN_MS=void 0;const i=o(n(7484));function r(e){return e.format("ddd")}function s(e){let t;return t=i.default().isSame(e,"date")?"today":i.default().add(1,"day").isSame(e,"date")?"tomorrow":i.default().to(e),t}t.ONE_MINUTE_IN_MS=6e4,t.ONE_HOUR_IN_MS=36e5,t.ONE_DAY_IN_MS=864e5,t.ONE_WEEK_IN_MS=6048e5,t.DATE_FORMAT="YYYY-MM-DD",t.TIME_FORMAT="HH:mm:ss",t.DATE_TIME_FORMAT=`${t.DATE_FORMAT}T${t.TIME_FORMAT}`,t.dayOfTheWeekRegexp=/^(sun|sunday|mon|monday|tue|tuesday|wed|wednesday|thu|thursday|fri|friday|sat|saturday)$/i,t.monthRegexp=/^(Jan|January|Feb|February|Mar|March|Apr|April|May|Jun|June|Aug|August|Sep|September|Oct|October|Nov|November|Dec|December)$/i,t.getDateInISOFormat=function(e=new Date,n=!1){const o=n?t.DATE_TIME_FORMAT:t.DATE_FORMAT;return i.default(e).format(o)},t.dayOfWeekToIndexOfWeek=function(e){if(/^(sun|sunday)$/i.test(e))return 0;if(/^(mon|monday)$/i.test(e))return 1;if(/^(tue|tuesday)$/i.test(e))return 2;if(/^(wed|wednesday)$/i.test(e))return 3;if(/^(thu|thursday)$/i.test(e))return 4;if(/^(fri|friday)$/i.test(e))return 5;if(/^(sat|saturday)$/i.test(e))return 6;throw Error(`Unknown day of the week. [${e}]`)},t.monthStringToMonthIndex=function(e){if(/^(Jan|January)$/i.test(e))return 0;if(/^(Feb|February)$/i.test(e))return 1;if(/^(Mar|March)$/i.test(e))return 2;if(/^(Apr|April)$/i.test(e))return 3;if(/^May$/i.test(e))return 4;if(/^(Jun|June)$/i.test(e))return 5;if(/^(Jul|July)$/i.test(e))return 6;if(/^(Aug|August)$/i.test(e))return 7;if(/^(Sep|September)$/i.test(e))return 8;if(/^(Oct|October)$/i.test(e))return 9;if(/^(Nov|November)$/i.test(e))return 10;if(/^(Dec|December)$/i.test(e))return 11;throw Error(`Unknown month. [${e}]`)},t.dayOfTheWeek=r,t.dateDiff=s,t.dateAndDateDiff=function(e){return`${e.format(t.DATE_FORMAT)} ${r(e)} [${s(e)}]`},t.isValidDate=function(e,t,n){const o=new Date(e,t,n);return e===o.getFullYear()&&t===o.getMonth()&&n===o.getDate()}},1409:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextProvider=t.ContextTreeItem=void 0;const i=o(n(7549)),r=n(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="project"}}t.ContextTreeItem=s,t.ContextProvider=class{constructor(e){this.contexts=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.contexts=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.contexts.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},2286:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectProvider=t.ProjectTreeItem=void 0;const i=o(n(7549)),r=n(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="project"}}t.ProjectTreeItem=s,t.ProjectProvider=class{constructor(e){this.projects=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.projects=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.projects.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},1242:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TagProvider=t.TagTreeItem=void 0;const i=o(n(7549)),r=n(2612);class s extends i.default.TreeItem{constructor(e,t){super(e),this.label=e,this.tasks=t,this.collapsibleState=i.default.TreeItemCollapsibleState.Collapsed,this.contextValue="tag"}}t.TagTreeItem=s,t.TagProvider=class{constructor(e){this.tags=e,this._onDidChangeTreeData=new i.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.tags=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(!e)return this.tags.map((e=>new s(`${e.title} [${e.tasks.length}]`,e.tasks)));if(e instanceof s)return r.tasksToTreeItems(e.tasks);{const t=e.task.subtasks;return t.length?r.tasksToTreeItems(t):[]}}}},2612:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.tasksToTreeItems=t.TaskProvider=t.TaskTreeItem=void 0;const a=s(n(7484)),u=r(n(7549)),l=n(112),c=n(2014),d=n(179);class f extends u.default.TreeItem{constructor(e,t,n){super(e),this.label=e,this.task=t,this.command=n,this.collapsibleState=u.default.TreeItemCollapsibleState.None,this.contextValue="task",t.links.length&&(this.contextValue="link"),t.subtasks.length&&(this.collapsibleState=u.default.TreeItemCollapsibleState.Expanded),t.isCollapsed&&(this.collapsibleState=u.default.TreeItemCollapsibleState.Collapsed),t.done&&(this.iconPath=new u.ThemeIcon("pass",new u.ThemeColor("todomd.treeViewCompletedTaskIcon")))}get tooltip(){return c.getTaskHover(this.task)}}function p(e){const t=[];for(const n of e)n.isHidden||n.threshold&&a.default().isAfter(new Date(n.threshold),"date")||t.push(new f(d.TheTask.formatTask(n,!0),n,{command:`${l.EXTENSION_NAME}.goToLine`,title:"Go To Line",arguments:[n.lineNumber]}));return t}t.TaskTreeItem=f,t.TaskProvider=class{constructor(e){this.tasks=e,this._onDidChangeTreeData=new u.default.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event}refresh(e){this.tasks=e,this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e}getChildren(e){if(e){const t=e.task.subtasks;return t.length?p(t):[]}return p(this.tasks)}},t.tasksToTreeItems=p},855:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateArchivedTasks=t.groupAndSortTreeItems=t.updateArchivedTasksTreeView=t.updateTasksTreeView=t.updateAllTreeViews=t.createAllTreeViews=t.tasksView=t.archivedProvider=t.taskProvider=t.contextProvider=t.projectProvider=t.tagProvider=void 0;const s=r(n(7549)),a=n(4295),u=n(112),l=n(1322),c=n(8306),d=n(1409),f=n(2286),p=n(1242),h=n(2612),m=n(9699),g=n(4291),v=n(4523),T=n(4641);t.tagProvider=new p.TagProvider([]),t.projectProvider=new f.ProjectProvider([]),t.contextProvider=new d.ContextProvider([]),t.taskProvider=new h.TaskProvider([]),t.archivedProvider=new h.TaskProvider([]);const w=new h.TaskProvider([]),D=new h.TaskProvider([]),y=new h.TaskProvider([]);let b,k,x,C,S,_,A;function E(){let e;e=u.extensionState.taskTreeViewFilterValue?l.filterItems(u.extensionState.tasksAsTree,u.extensionState.taskTreeViewFilterValue):u.extensionState.tasksAsTree,t.taskProvider.refresh(e),F(t.tasksView,"tasks",e.length)}function O(){const e=u.extensionState.archivedTasks;t.archivedProvider.refresh(e),F(C,"archived",e.length)}function F(e,t,n,o=""){e.title=`${t} (${n}) ${o}`}t.createAllTreeViews=function(){if(b=s.default.window.createTreeView(`${u.EXTENSION_NAME}.tags`,{treeDataProvider:t.tagProvider,showCollapseAll:!0}),k=s.default.window.createTreeView(`${u.EXTENSION_NAME}.projects`,{treeDataProvider:t.projectProvider,showCollapseAll:!0}),x=s.default.window.createTreeView(`${u.EXTENSION_NAME}.contexts`,{treeDataProvider:t.contextProvider,showCollapseAll:!0}),t.tasksView=s.default.window.createTreeView(`${u.EXTENSION_NAME}.tasks`,{treeDataProvider:t.taskProvider,showCollapseAll:!0}),t.tasksView.onDidCollapseElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),t.tasksView.onDidExpandElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),C=s.default.window.createTreeView(`${u.EXTENSION_NAME}.archived`,{treeDataProvider:t.archivedProvider}),u.extensionConfig.treeViews.length){const e=u.extensionConfig.treeViews[0];e&&("string"!=typeof e.filter||"string"!=typeof e.title?s.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(S=s.default.window.createTreeView("todomd.generic1",{treeDataProvider:w,showCollapseAll:!0}),S.onDidCollapseElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),S.onDidExpandElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),v.setContext("todomd:generic1FilterExists",!0)));const t=u.extensionConfig.treeViews[1];t&&("string"!=typeof t.filter||"string"!=typeof t.title?s.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(_=s.default.window.createTreeView("todomd.generic2",{treeDataProvider:D,showCollapseAll:!0}),_.onDidCollapseElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),_.onDidExpandElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),v.setContext("todomd:generic2FilterExists",!0)));const n=u.extensionConfig.treeViews[2];n&&("string"!=typeof n.filter||"string"!=typeof n.title?s.default.window.showWarningMessage("Tree View must have filter and title and they must be strings."):(A=s.default.window.createTreeView("todomd.generic3",{treeDataProvider:y,showCollapseAll:!0}),A.onDidCollapseElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),A.onDidExpandElement((async e=>{a.toggleTaskCollapse(await g.getActiveDocument(),e.element.task.lineNumber)})),v.setContext("todomd:generic3FilterExists",!0)))}else v.setContext("todomd:generic1FilterExists",!1),v.setContext("todomd:generic2FilterExists",!1),v.setContext("todomd:generic3FilterExists",!1)},t.updateAllTreeViews=function(){if(t.tagProvider.refresh(u.extensionState.tagsForTreeView),F(b,"tags",u.extensionState.tagsForTreeView.length),E(),t.projectProvider.refresh(u.extensionState.projectsForTreeView),F(k,"projects",u.extensionState.projectsForTreeView.length),t.contextProvider.refresh(u.extensionState.contextsForTreeView),F(x,"contexts",u.extensionState.contextsForTreeView.length),S){const e=l.filterItems(u.extensionState.tasksAsTree,u.extensionConfig.treeViews[0].filter);w.refresh(e),F(S,u.extensionConfig.treeViews[0].title,e.length)}if(_){const e=l.filterItems(u.extensionState.tasksAsTree,u.extensionConfig.treeViews[1].filter);D.refresh(e),F(_,u.extensionConfig.treeViews[1].title,e.length)}if(A){const e=l.filterItems(u.extensionState.tasksAsTree,u.extensionConfig.treeViews[2].filter);y.refresh(e),F(A,u.extensionConfig.treeViews[2].title,e.length)}T.updateWebviewView()},t.updateTasksTreeView=E,t.updateArchivedTasksTreeView=O,t.groupAndSortTreeItems=function(e){const t={},n={},o={};for(const i of e){for(const e of i.tags)t[e]||(t[e]=[]),t[e].push(i);if(i.projects.length)for(const e of i.projects)n[e]||(n[e]=[]),n[e].push(i);if(i.contexts.length)for(const e of i.contexts)o[e]||(o[e]=[]),o[e].push(i)}const i=[];for(const e in t)i.push({title:e,tasks:t[e]});let r;r=u.extensionConfig.sortTagsView===m.SortTags.alphabetic?i.sort(((e,t)=>e.title.localeCompare(t.title))):i.sort(((e,t)=>t.tasks.length-e.tasks.length));const s=[];for(const e in n)s.push({title:e,tasks:n[e]});const a=[];for(const e in o)a.push({title:e,tasks:o[e]});return{contextsForProvider:a,projectsForProvider:s,sortedTagsForProvider:r,tags:Object.keys(t),projects:Object.keys(n),contexts:Object.keys(o)}},t.updateArchivedTasks=async function(){if(!u.extensionConfig.defaultArchiveFile)return;const e=await s.workspace.openTextDocument(s.default.Uri.file(u.extensionConfig.defaultArchiveFile)),t=await c.parseDocument(e);u.extensionState.archivedTasks=t.tasks,O()}},9699:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SortTags=void 0,(n=t.SortTags||(t.SortTags={})).alphabetic="alphabetic",n.frequency="frequency"},4291:function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.checkArchiveFileAndNotify=t.checkDefaultFileAndNotify=t.specifyDefaultArchiveFile=t.specifyDefaultFile=t.getDocumentForDefaultFile=t.getActiveDocument=t.applyEdit=void 0;const i=o(n(5747)),r=n(7549),s=n(112),a=n(4523);function u(){a.openSettingGuiAt("todomd.defaultFile")}function l(){a.openSettingGuiAt("todomd.defaultArchiveFile")}t.applyEdit=async function(e,t){return await r.workspace.applyEdit(e),await t.save()},t.getActiveDocument=async function(){if(void 0===s.extensionState.activeDocument)throw r.window.showErrorMessage("No active document"),new Error("No active document");return s.extensionState.activeDocument.isClosed&&(s.extensionState.activeDocument=await r.workspace.openTextDocument(s.extensionState.activeDocument.uri)),s.extensionState.activeDocument},t.getDocumentForDefaultFile=async function(){if(s.extensionConfig.defaultFile)return await r.workspace.openTextDocument(r.Uri.file(s.extensionConfig.defaultFile))},t.specifyDefaultFile=u,t.specifyDefaultArchiveFile=l,t.checkDefaultFileAndNotify=async function(){const e="Specify";return s.extensionConfig.defaultFile?!!i.default.existsSync(s.extensionConfig.defaultFile)||(await r.window.showErrorMessage("Default file does not exist.",e)===e&&u(),!1):(await r.window.showWarningMessage("Default file is not specified.",e)===e&&u(),!1)},t.checkArchiveFileAndNotify=async function(){const e="Specify";return s.extensionConfig.defaultArchiveFile?!!i.default.existsSync(s.extensionConfig.defaultArchiveFile)||(await r.window.showErrorMessage("Specified default archive file does not exist.",e)===e&&l(),!1):(await r.window.showWarningMessage("Default archive file is not specified.",e)===e&&l(),!1)}},9368:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forEachTask=t.findTaskAtLineExtension=void 0;const o=n(112);function i(e,t){for(const n of t){if(n.lineNumber===e)return n;if(n.subtasks.length){const t=i(e,n.subtasks);if(t)return t}}}t.findTaskAtLineExtension=function(e){return i(e,o.extensionState.tasksAsTree)},t.forEachTask=function e(t,n=o.extensionState.tasksAsTree){for(const o of n)t(o),o.subtasks.length&&e(t,o.subtasks)}},974:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fancyNumber=t.percentage=void 0,t.percentage=function(e,t){return e/t*100},t.fancyNumber=function(e){const t=["0️⃣","1️⃣","2️⃣","3️⃣","4️⃣","5️⃣","6️⃣","7️⃣","8️⃣","9️⃣"];return String(e).split("").map((e=>t[Number(e)])).join("")}},4523:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getWordAtPosition=t.getWordRangeAtPosition=t.inputOffset=t.openSettingGuiAt=t.followLink=t.followLinks=t.setContext=t.getFullRangeFromLines=t.openFileInEditor=t.openInUntitled=void 0;const s=r(n(7549));async function a(e){return await s.default.env.openExternal(s.Uri.parse(e))}function u(e,t){return e.getWordRangeAtPosition(t,/\S+/)}t.openInUntitled=async function(e,t){const n=await s.default.workspace.openTextDocument({language:t,content:e});s.default.window.showTextDocument(n)},t.openFileInEditor=async function(e){const t=await s.default.workspace.openTextDocument(e);s.default.window.showTextDocument(t)},t.getFullRangeFromLines=function(e,t,n){const o=e.lineAt(n);return new s.default.Range(t,0,n,o.range.end.character)},t.setContext=async function(e,t){return await s.default.commands.executeCommand("setContext",e,t)},t.followLinks=async function(e){let t=e[0].value;e.length>1&&(t=await s.default.window.showQuickPick(e.map((e=>e.value))),!t)||a(t)},t.followLink=a,t.openSettingGuiAt=function(e){s.default.commands.executeCommand("workbench.action.openSettings",e)},t.inputOffset=function(e){return`${e}${" ".repeat(8)}`},t.getWordRangeAtPosition=u,t.getWordAtPosition=function(e,t){const n=u(e,t);if(n)return e.getText(n)}},7189:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonce=void 0,t.getNonce=function(){let e="";const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<32;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}},4641:function(e,t,n){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,n,o){void 0===o&&(o=n),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,o){void 0===o&&(o=n),e[o]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.updateWebviewView=t.TasksWebviewViewProvider=void 0;const s=r(n(7549)),a=n(4295),u=n(112),l=n(4291),c=n(9368),d=n(4523),f=n(7189);class p{constructor(e){this._extensionUri=e}resolveWebviewView(e,t,n){this._view=e,e.webview.options={enableScripts:!0,enableCommandUris:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview),this.updateEverything(),this.updateTitle(u.extensionState.tasksAsTree.length),e.webview.onDidReceiveMessage((async e=>{switch(e.type){case"toggleDone":await a.toggleDoneAtLine(await l.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"showNotification":s.window.showInformationMessage(e.value);break;case"goToTask":a.goToTask(e.value);break;case"toggleTaskCollapse":await a.toggleTaskCollapse(await l.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"incrementCount":await a.incrementCountForTask(await l.getActiveDocument(),e.value,c.findTaskAtLineExtension(e.value)),await u.updateState(),this.updateEverything();break;case"decrementCount":await a.decrementCountForTask(await l.getActiveDocument(),e.value,c.findTaskAtLineExtension(e.value)),await u.updateState(),this.updateEverything();break;case"deleteTask":await a.tryToDeleteTask(await l.getActiveDocument(),e.value),await u.updateState(),this.updateEverything();break;case"updateTitle":this.updateTitle(e.value);break;case"followLink":d.followLink(e.value)}})),e.onDidChangeVisibility((t=>{!0===e.visible&&this.updateEverything()}))}updateEverything(){this._view&&!0===this._view.visible&&this._view.webview.postMessage({type:"updateEverything",value:{tasksAsTree:u.extensionState.tasksAsTree,tags:u.extensionState.tags,projects:u.extensionState.projects,contexts:u.extensionState.contexts,defaultFileSpecified:Boolean(u.extensionConfig.defaultFile),activeDocumentOpened:Boolean(u.extensionState.activeDocument),config:u.extensionConfig.webview}})}updateTitle(e){this._view&&(this._view.title=`webview (${e})`)}_getHtmlForWebview(e){const t=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","webview.js")),n=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","webview.css")),o=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","vendor","codicon.css")),i=e.asWebviewUri(s.default.Uri.joinPath(this._extensionUri,"media","vendor","codicon.ttf")),r=f.getNonce();return`<!DOCTYPE html>\n\t\t\t<html lang="en">\n\t\t\t<head>\n\t\t\t\t<meta charset="UTF-8">\n\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t<meta http-equiv="Content-Security-Policy" content="default-src 'none'; font-src ${i}; style-src 'unsafe-inline' ${e.cspSource} ${o}; script-src 'nonce-${r}';">\n\t\t\t\t<link href="${o}" rel="stylesheet" />\n\t\t\t\t<link href="${n}" rel="stylesheet">\n\t\t\t\t<title>Tasks</title>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t<div id="app"></div>\n\t\t\t\t<script defer nonce="${r}" src="${t}"><\/script>\n\t\t\t</body>\n\t\t\t</html>`}}t.TasksWebviewViewProvider=p,p.viewType="todomd.webviewTasks",t.updateWebviewView=function(){u.Global.webviewProvider&&u.Global.webviewProvider.updateEverything()}},5747:e=>{"use strict";e.exports=require("fs")},7549:e=>{"use strict";e.exports=require("vscode")}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}return n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n(112)})();
//# sourceMappingURL=extension.js.map